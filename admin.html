<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="./favicon.ico">
  <link rel="icon" type="image/png" href="./favicon.png"> 
  <title>ููุญุฉ ุงูุฃุฏูู</title>

  <!-- ุฎุทูุท -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="./css/admin.css?v=2025-09-01">
  <link rel="stylesheet" href="./css/food-items.css?v=2025-09-01">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <span class="logo">A</span>
      <span class="title">ููุญุฉ ุงูุฃุฏูู</span>
    </div>
    <nav class="tabs">
      <button class="tab-btn active" data-tab="requests">ุทูุจุงุช</button>
      <button class="tab-btn" data-tab="links">ุฑุจุท</button>
      <button class="tab-btn" data-tab="foods">ุงูุฃุตูุงู</button>
    </nav>
  </header>

  <main class="container">
    <!-- ========================= -->
    <!-- [GPT5 PATCH START] ุชุจููุจ ุงูุทูุจุงุช -->
    <!-- ========================= -->
    <section id="tab-requests" class="tab active">
      <div class="card">
        <h2>ุทูุจุงุช ุงูุฃุทุจุงุก (ููุฏ ุงูุงุนุชูุงุฏ)</h2>

        <div class="toolbar" style="display:flex;gap:10px;align-items:center;margin-bottom:12px">
          <button id="refresh" class="secondary">ุชุญุฏูุซ</button>
          <span id="stats" class="muted">โ</span>
        </div>

        <div id="grid"></div>
        <div id="empty" class="muted" style="margin-top:8px;display:none">ูุง ุชูุฌุฏ ุทูุจุงุช ูุนูููุฉ ุญุงูููุง.</div>
      </div>
    </section>
    <!-- ========================= -->
    <!-- [GPT5 PATCH END] -->
    <!-- ========================= -->

    <!-- ========================= -->
    <!-- [GPT5 PATCH START] ุชุจููุจ ุงูุฑุจุท -->
    <!-- ========================= -->
    <section id="tab-links" class="tab">
      <div class="card">
        <h2>ุฅุฏุงุฑุฉ ุฃููุงุฏ ุงูุฑุจุท</h2>

        <div class="toolbar" style="display:flex;gap:10px;align-items:center;margin-bottom:12px">
          <input id="codeQ" type="text" placeholder="ุงุจุญุซ ุจุฑูู/ุญุฑูู ุงูููุฏโฆ" style="flex:1">
          <button id="codeFind" class="secondary">ุจุญุซ</button>
        </div>

        <div id="codeList"></div>
        <div id="codeEmpty" class="muted" style="margin-top:8px;display:none">ูุง ุชูุฌุฏ ูุชุงุฆุฌ ูุทุงุจูุฉ.</div>
      </div>
    </section>
    <!-- ========================= -->
    <!-- [GPT5 PATCH END] -->
    <!-- ========================= -->

    <!-- ุชุจููุจ ุงูุฃุตูุงู (ูุญููุธ ููุง ูู) -->
    <section id="tab-foods" class="tab">
      <div class="card">
        <h2>ููุชุจุฉ ุงูุฃุตูุงู ุงูุนุงูุฉ</h2>

        <div class="toolbar">
          <button id="btnNew" class="primary">โ ุฅุถุงูุฉ ุตูู</button>
          <input id="q" type="text" placeholder="ุจุญุซ ุนู ุตูู..." />
        </div>

        <div id="grid" class="grid"></div>

        <!-- ูุงูุฐุฉ ุงููููุฐุฌ -->
        <dialog id="dlg">
          <form id="form" method="dialog">
            <!-- ุตูุฑุฉ ุงูููุชุฌ ุนุจุฑ ุงูุฑุงุจุท + ูุนุงููุฉ -->
            <div class="image-block" style="display:flex;align-items:center;gap:12px;margin:8px 0 14px;">
              <img id="img" src="" alt="ูุนุงููุฉ ุงูุตูุฑุฉ"
                   style="width:60px;height:60px;object-fit:cover;border-radius:6px;border:1px solid #e5e8ef;" />
              <input id="imageUrl" type="url" placeholder="ุฑุงุจุท ุงูุตูุฑุฉ (https://...)"
                     style="flex:1;border:1px solid #e5e8ef;border-radius:10px;padding:8px;" />
              <button id="btnPreview" type="button" class="secondary">ูุนุงููุฉ</button>
            </div>
            <div class="hint" style="margin:-6px 0 10px;color:#6b7a8a;">
              ุถุนู ุฑุงุจุท ุตูุฑุฉ ูุจุงุดุฑ. (ูู ูุชู ุฑูุน ูููุงุช โ ููุท ุงุณุชุฎุฏุงู ุงูุฑุงุจุท ููุง ูู)
            </div>

            <!-- ุจูุงูุงุช ุงูุชุบุฐูุฉ -->
            <div class="form-grid">
              <label for="name">ุงูุงุณู *</label>
              <input id="name" type="text" required />

              <label for="category">ุงููุฆุฉ</label>
              <input id="category" type="text" placeholder="ูุซู: ุฎุถุงุฑุ ุฃูุจุงูโฆ" />

              <label for="brand">ุงูุจุฑุงูุฏ</label>
              <input id="brand" type="text" />

              <label for="carbs">ูุงุฑุจ/100ุฌู</label>
              <input id="carbs" type="number" step="any" />

              <label for="fiber">ุฃููุงู/100ุฌู</label>
              <input id="fiber" type="number" step="any" />

              <label for="prot">ุจุฑูุชูู/100ุฌู</label>
              <input id="prot" type="number" step="any" />

              <label for="fat">ุฏููู/100ุฌู</label>
              <input id="fat" type="number" step="any" />

              <label for="cal">ุณุนุฑุงุช/100ุฌู</label>
              <input id="cal" type="number" step="any" />

              <label for="gi">GI</label>
              <input id="gi" type="number" step="any" />
            </div>

            <!-- ุงูููุงุฏูุฑ ุงูุจูุชูุฉ -->
            <div class="measures-block">
              <div id="measList" class="meas-list"></div>
              <div class="meas-add">
                <input id="measName" type="text" placeholder="ูุซุงู: ููุจ" />
                <input id="measGrams" type="number" step="any" placeholder="ุฌุฑุงู" />
                <button id="btnAddMeas" type="button" class="secondary">ุฅุถุงูุฉ ูููุงุณ</button>
              </div>
            </div>

            <!-- ุฃุฒุฑุงุฑ ุงูุชุญูู -->
            <div class="actions">
              <button id="btnSave"   class="primary"   type="button">๐พ ุญูุธ ุฌุฏูุฏ</button>
              <button id="btnUpdate" class="secondary" type="button" style="display:none;">โ๏ธ ุชุนุฏูู</button>
              <button id="btnReset"  type="button">ุฅูุบุงุก</button>
              <button id="btnDelete" type="button" class="danger" style="display:none;">๐๏ธ ุญุฐู</button>
            </div>
          </form>
        </dialog>
      </div>
    </section>
  </main>

  <!-- Toast ุนุงู (ูู ูุด ููุฌูุฏ ูู CSSุ ููุธูุฑ/ูุฎุชูู ุจุจุณุงุทุฉ) -->
  <!-- [GPT5 PATCH START] -->
  <div id="toast" class="toast hidden" style="position:fixed;inset-inline:0;bottom:20px;margin:auto;max-width:260px;background:#111;color:#fff;padding:10px 14px;border-radius:10px;text-align:center;opacity:.95;z-index:9999">
    ุชู
  </div>
  <!-- [GPT5 PATCH END] -->

  <!-- ุณูุฑุจุช ุงูุชุงุจุงุช + ุงูุฃุฏูู -->
  <script type="module" src="./js/admin.js?v=2025-09-01"></script>
  <!-- ุณูุฑุจุช ุงูุฃุตูุงู (ูุญููุธ ููุง ูู) -->
  <script type="module" src="./js/food-items.js?v=2025-09-01"></script>
</body>
</html>
