<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ุฅุนุฏุงุฏุงุช ุงูุทูู</title>

  <link rel="icon" href="./favicon.png" />
  <link rel="stylesheet" href="./css/admin.css" />
  <link rel="stylesheet" href="./css/child-edit.css" />
</head>
<body>
  <header class="topbar">
    <div class="left"><a href="child.html" class="btn ghost">ุงูุฑุฆูุณูุฉ</a></div>
    <div class="center"><h1 class="title">ุฅุนุฏุงุฏุงุช ุงูุทูู</h1></div>
    <div class="right">
      <span id="roleBadge" class="badge">โ</span>
      <a id="doctorLink" class="tiny link" href="#" title="ุตูุญุฉ ุงูุทุจูุจ">โ</a>
    </div>
  </header>

  <main class="container">
    <!-- ููุฎุต -->
    <section class="card" id="card-summary">
      <h2 class="card-title">ุงูููุฎุต ุงูุณุฑูุน</h2>
      <div class="summary-grid">
        <div class="sum-item"><b>ุงูุงุณู:</b> <span id="hdrName">โ</span></div>
        <div class="sum-item"><b>ุงูุฑูู ุงููุฏูู:</b> <span id="hdrCivil">โ</span></div>
        <div class="sum-item"><b>ุงูุนูุฑ:</b> <span id="hdrAge">โ</span></div>
        <div class="sum-item"><b>ุงููุญุฏุฉ:</b> <span id="hdrUnit">โ</span></div>
        <div class="sum-item"><b>ุขุฎุฑ ุชุญุฏูุซ:</b> <span id="hdrUpdated">โ</span></div>
        <div class="sum-item"><b>ุงูุทุจูุจ:</b> <span id="hdrDoctor">โ</span></div>
      </div>
      <div id="hdrDietChips" class="chips-row" aria-label="ุงูุฃูุธูุฉ ุงูููุนููุฉ"></div>
    </section>

    <!-- ุงููููุฉ -->
    <section class="card" id="card-identity">
      <h2 class="card-title">ุงููููุฉ ูุงููุนูููุงุช ุงูุฃุณุงุณูุฉ</h2>
      <div class="form-grid">
        <label class="field">ุงูุงุณู ุงููุงูู<input id="f_name" autocomplete="off" /></label>
        <label class="field">ุงูุฑูู ุงููุฏูู / ุงููุทูู<input id="f_civilId" autocomplete="off" /></label>
        <label class="field">ุงูุฌูุณ
          <select id="f_gender">
            <option value="">โ</option><option value="male">ุฐูุฑ</option><option value="female">ุฃูุซู</option>
          </select>
        </label>
        <label class="field">ุชุงุฑูุฎ ุงููููุงุฏ<input id="f_birthDate" type="date" /></label>
        <label class="field">ูุญุฏุฉ ุณูุฑ ุงูุฏู
          <select id="f_unit"><option value="">โ</option><option value="mg/dL">mg/dL</option><option value="mmol/L">mmol/L</option></select>
        </label>
        <label class="field">ุงูุทูู (ุณู)<input id="f_heightCm" type="number" step="0.1" /></label>
        <label class="field">ุงููุฒู (ูุฌู)<input id="f_weightKg" type="number" step="0.1" /></label>
      </div>
      <p id="unitChangeWarn" class="tiny warn hidden">โ๏ธ ุชุบููุฑ ุงููุญุฏุฉ ูุง ูุญููู ุงูููู ุชููุงุฆููุง.</p>
    </section>

    <!-- ุงูุญุฏูุฏ -->
    <section class="card" id="card-glucose">
      <h2 class="card-title">ููุงุณุงุช ุงูุณูุฑ (ุงูุญุฏูุฏ)</h2>
      <div class="form-grid glucose-grid">
        <label class="field critical">ูุจูุท ุญูุฑูุฌ<input id="f_criticalLow" type="number" step="0.1" /></label>
        <label class="field severe">ูุจูุท ุดุฏูุฏ<input id="f_severeLow" type="number" step="0.1" /></label>
        <label class="field low">ูุจูุท<input id="f_hypo" type="number" step="0.1" /></label>
        <label class="field high">ุงุฑุชูุงุน<input id="f_hyper" type="number" step="0.1" /></label>
        <label class="field severe">ุงุฑุชูุงุน ุดุฏูุฏ<input id="f_severeHigh" type="number" step="0.1" /></label>
        <label class="field critical">ุงุฑุชูุงุน ุญูุฑูุฌ<input id="f_criticalHigh" type="number" step="0.1" /></label>
      </div>
      <div class="normal-row">
        <div class="badge" id="normalBadge">ุงููุฏู ุงูุทุจูุนู: โ</div>
        <div class="muted tiny" id="normalHint">ููุญุณุจ ุชููุงุฆููุง ุญุณุจ ุงููุญุฏุฉุ ุฃู ูู ุงูููู ุงููุฎุตุตุฉ ุฅู ููุฌุฏุช.</div>
      </div>
      <div class="tiny muted" id="glOrderHint">ุงูุชุฑุชูุจ ุงูููุตู ุจู: Critical Low โค Severe Low โค Hypo โค Hyper โค Severe High โค Critical High</div>
    </section>

    <!-- ุฃูุฏุงู ุงููุงุฑุจ -->
    <section class="card" id="card-carb-goals">
      <h2 class="card-title">ุฃูุฏุงู ุงููุงุฑุจ ูููุฌุจุงุช (ุฌุฑุงู)</h2>
      <div class="meal-goals-grid">
        <div class="mini-card">
          <div class="mini-title">ูุทุงุฑ</div>
          <div class="mini-grid one">
            <label>ูู<input id="f_carb_b_min" type="number" step="0.1" placeholder="ูู" /></label>
            <label>ุฅูู<input id="f_carb_b_max" type="number" step="0.1" placeholder="ุฅูู" /></label>
          </div>
          <div class="mini-err tiny" id="err_b"></div>
        </div>
        <div class="mini-card">
          <div class="mini-title">ุบุฏุง</div>
          <div class="mini-grid one">
            <label>ูู<input id="f_carb_l_min" type="number" step="0.1" placeholder="ูู" /></label>
            <label>ุฅูู<input id="f_carb_l_max" type="number" step="0.1" placeholder="ุฅูู" /></label>
          </div>
          <div class="mini-err tiny" id="err_l"></div>
        </div>
        <div class="mini-card">
          <div class="mini-title">ุนุดุง</div>
          <div class="mini-grid one">
            <label>ูู<input id="f_carb_d_min" type="number" step="0.1" placeholder="ูู" /></label>
            <label>ุฅูู<input id="f_carb_d_max" type="number" step="0.1" placeholder="ุฅูู" /></label>
          </div>
          <div class="mini-err tiny" id="err_d"></div>
        </div>
        <div class="mini-card">
          <div class="mini-title">ุณูุงู</div>
          <div class="mini-grid one">
            <label>ูู<input id="f_carb_s_min" type="number" step="0.1" placeholder="ูู" /></label>
            <label>ุฅูู<input id="f_carb_s_max" type="number" step="0.1" placeholder="ุฅูู" /></label>
          </div>
          <div class="mini-err tiny" id="err_s"></div>
        </div>
      </div>
      <p class="tiny muted">ููุณุชุฎุฏู ูุฐุง ุงููุทุงู ุชููุงุฆููุง ูู ุตูุญุฉ ุงููุฌุจุงุชุ ููููู ุชุนุฏูู ุงููุทุงู ูุคูุชูุง ููุงู ุฏูู ุชุบููุฑ ูุฐู ุงูููู.</p>
    </section>

    <!-- ุงูุฃูุณูููู ูุงูุฌูุงุฒ -->
    <section class="card insulin-card" id="card-insulin">
      <h2 class="card-title">ุงูุฃูุณูููู ูุงูุฌูุงุฒ</h2>

      <h3 class="sub-title">ุงููุนุงููุงุช ุงูุนุงูุฉ</h3>
      <div class="form-grid">
        <label class="field">ูุนุงุฏู ุงููุงุฑุจ (CR)<input id="f_carbRatio" type="number" step="0.1" placeholder="ุฌุฑุงู/ูุญุฏุฉ" /></label>
        <label class="field">ูุนุงูู ุงูุชุตุญูุญ (CF/ISF)<input id="f_correctionFactor" type="number" step="0.1" placeholder="mg/dL ุฃู mmol/L ููู ูุญุฏุฉ" /></label>
        <label class="field">ูุฏู ุงูุชุตุญูุญ
          <select id="f_targetPref">
            <option value="max">ุงูุญุฏ ุงูุฃุนูู ูููุฏู ุงูุทุจูุนู (ููุตู ุจู)</option>
            <option value="mid">ููุชุตู ุงููุฏู ุงูุทุจูุนู</option>
          </select>
        </label>
      </div>

      <h3 class="sub-title">ุญุณุจ ุงููุฌุจุฉ (ุงุฎุชูุงุฑู)</h3>
      <div class="per-meal-grid">
        <div class="mini-card">
          <div class="mini-title">ูุทุงุฑ</div>
          <div class="mini-grid one">
            <label>CF (ูุนุงูู ุงูุชุตุญูุญ)<input id="f_cf_b" type="number" step="0.1" placeholder="CF" /></label>
            <label>CR (ูุนุงุฏู ุงููุงุฑุจ)<input id="f_cr_b" type="number" step="0.1" placeholder="CR" /></label>
          </div>
        </div>
        <div class="mini-card">
          <div class="mini-title">ุบุฏุง</div>
          <div class="mini-grid one">
            <label>CF (ูุนุงูู ุงูุชุตุญูุญ)<input id="f_cf_l" type="number" step="0.1" placeholder="CF" /></label>
            <label>CR (ูุนุงุฏู ุงููุงุฑุจ)<input id="f_cr_l" type="number" step="0.1" placeholder="CR" /></label>
          </div>
        </div>
        <div class="mini-card">
          <div class="mini-title">ุนุดุง</div>
          <div class="mini-grid one">
            <label>CF (ูุนุงูู ุงูุชุตุญูุญ)<input id="f_cf_d" type="number" step="0.1" placeholder="CF" /></label>
            <label>CR (ูุนุงุฏู ุงููุงุฑุจ)<input id="f_cr_d" type="number" step="0.1" placeholder="CR" /></label>
          </div>
        </div>
        <div class="mini-card">
          <div class="mini-title">ุณูุงู</div>
          <div class="mini-grid one">
            <label>CF (ูุนุงูู ุงูุชุตุญูุญ)<input id="f_cf_s" type="number" step="0.1" placeholder="CF" /></label>
            <label>CR (ูุนุงุฏู ุงููุงุฑุจ)<input id="f_cr_s" type="number" step="0.1" placeholder="CR" /></label>
          </div>
        </div>
      </div>

      <h3 class="sub-title">ุฃููุงุน ุงูุฃูุณูููู ูุงูุฌูุงุฒ</h3>
      <div class="form-grid">
        <label class="field">ุทููู ุงูููุนูู (Basal)<input id="f_basalType" /></label>
        <label class="field">ุณุฑูุน/ูุฌุจุงุช (Bolus)<input id="f_bolusType" /></label>
        <label class="field">ููุน ุงูุฌูุงุฒ
          <select id="f_deviceType"><option value="">โ</option><option value="pen">ููู</option><option value="smart-pen">ููู ุฐูู</option><option value="pump">ูุถุฎุฉ</option><option value="syringe">ุณุฑูุฌุฉ</option></select>
        </label>
        <label class="field">ููุฏูู ุงูุฌูุงุฒ<input id="f_deviceModel" /></label>
      </div>

      <div class="form-grid">
        <div class="field">
          <label>ููุงูุน ุงูุญูู (Enter ููู ูููุน)</label>
          <div class="chip-input" id="injectionSitesInput"><input type="text" placeholder="abdomen, thigh, arm..." /></div>
        </div>
        <label class="field">ููุงุญุธุงุช ุงูุฃูุณูููู<textarea id="f_insulinNotes" rows="3" placeholder="ููุงุญุธุงุช ุนุงูุฉ"></textarea></label>
      </div>

      <!-- โ ุตูุฑุฉ ุฃูุงูู ุงูุญูู -->
      <div class="injection-guide" aria-hidden="true">
        <img src="images/body.jpeg" alt="Injection sites" />
      </div>
    </section>

    <!-- ุงูุฃูุธูุฉ ุงูุบุฐุงุฆูุฉ ูุงูุญุณุงุณูุงุช -->
    <section class="card" id="card-diet">
      <h2 class="card-title">ุงูุฃูุธูุฉ ุงูุบุฐุงุฆูุฉ ูุงูุญุณุงุณูุงุช</h2>

      <div class="diet-layout">
        <div class="diet-left">
          <div class="form-grid">
            <div class="field"><label>ุญุณุงุณูุงุช (Enter)</label><div class="chip-input" id="allergiesInput"><input type="text" placeholder="peanut, lactose, egg..." /></div></div>
            <div class="field"><label>ููุถูุงุช (Enter)</label><div class="chip-input" id="preferredInput"><input type="text" placeholder="ุชูุงุญุ ุฒุจุงุฏู..." /></div></div>
            <div class="field"><label>ุบูุฑ ููุถูุงุช (Enter)</label><div class="chip-input" id="dislikedInput"><input type="text" placeholder="ุณุจุงูุฎ..." /></div></div>
          </div>
        </div>

        <div class="diet-right">
          <div class="diet-caption">ุฃูุธูุฉ ุบุฐุงุฆูุฉ</div>
          <div class="diet-rows">
            <div class="diet-row">
              <label><input type="checkbox" class="diet-flag" value="halal"> ุญูุงู</label>
              <label><input type="checkbox" class="diet-flag" value="vegetarian"> ูุจุงุชู</label>
              <label><input type="checkbox" class="diet-flag" value="vegan"> ูุจุงุชู ุตุงุฑู</label>
              <label><input type="checkbox" class="diet-flag" value="gluten_free"> ุฎุงูู ูู ุงูุฌููุชูู</label>
            </div>
            <div class="diet-row">
              <label><input type="checkbox" class="diet-flag" value="lactose_free"> ุฎุงูู ูู ุงููุงูุชูุฒ</label>
              <label><input type="checkbox" class="diet-flag" value="low_sugar"> ูููู ุงูุณูุฑ</label>
              <label><input type="checkbox" class="diet-flag" value="low_carb"> ูููู ุงููุงุฑุจ</label>
              <label><input type="checkbox" class="diet-flag" value="low_fat"> ูููู ุงูุฏููู</label>
            </div>
            <div class="diet-row">
              <label><input type="checkbox" class="diet-flag" value="low_sodium"> ูููู ุงูุตูุฏููู</label>
              <label><input type="checkbox" class="diet-flag" value="low_satfat"> ุฏููู ูุดุจุนุฉ ููููุฉ</label>
              <label><input type="checkbox" class="diet-flag" value="med_diet"> ูุชูุณุทูุฉ (ุงุฎุชูุงุฑู)</label>
            </div>
          </div>
        </div>
      </div>

      <p class="tiny muted">ุชูุณุชุฎุฏู ูุฐู ุงูุฅุนุฏุงุฏุงุช ูุชุฑุดูุญ ุงูุฃุตูุงู ูุงูุจุฏุงุฆู ูู ุตูุญุฉ ุงููุฌุจุงุช.</p>
    </section>

    <!-- ููุงุญุธุงุช -->
    <section class="card" id="card-notes">
      <h2 class="card-title">ููุงุญุธุงุช ูุจูุงูุงุช ุฅุฏุงุฑูุฉ</h2>
      <div class="form-grid">
        <label class="field">ููุงุญุธุงุช ุนุงูุฉ<textarea id="f_notes" rows="3" placeholder="ููุงุญุธุงุช ุงุฎุชูุงุฑูุฉโฆ"></textarea></label>
        <div class="field"><label>ุขุฎุฑ ุชุญุฏูุซ</label><input id="f_updated" disabled /></div>
      </div>
    </section>

    <div class="status-row">
      <button id="btnSave" class="btn primary">๐พ ุญูุธ</button>
      <span id="status" class="tiny muted">โ</span>
    </div>
  </main>

  <div id="loader" class="modal hidden" aria-hidden="true">
    <div class="modal-body">ุฌุงุฑู ุงูุญูุธโฆ โณ</div>
  </div>

  <script type="module" src="./js/child-edit.js"></script>
</body>
</html>
