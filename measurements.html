<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>قياسات السكر</title>
  <link rel="stylesheet" href="css/measurements.css">
  <link rel="icon" href="data:,">
</head>
<body>
  <div class="container">

    <!-- المنطقة 1: بطاقة الطفل -->
    <header class="top">
      <button class="back" onclick="history.back()">⬅ رجوع</button>
      <div class="child-card">
        <h1>👶 <span id="childName">...</span></h1>
        <p id="childMeta">الوحدة: mg/dL • الطبيعي: <span id="range">-</span></p>
        <div id="todayStats" class="stats">
          <!-- سيتم ملؤها: عدد/متوسط/أدنى/أعلى لليوم -->
        </div>
      </div>
    </header>

    <!-- المنطقة 2: إدخال القياس -->
    <section class="card">
      <h3>➕ إضافة / تعديل قياس</h3>

      <form id="mForm" class="grid">
        <!-- اختيار يوم العمل (للجدول والتحقق) -->
        <div class="field">
          <label>تاريخ اليوم</label>
          <input type="date" id="selDate" required>
        </div>

        <div class="field">
          <label>وقت القياس</label>
          <select id="slot" required>
            <option value="">اختر الوقت</option>
          </select>
        </div>

        <div class="field">
          <label>قيمة القياس</label>
          <input type="number" id="value" step="any" placeholder="أدخل القيمة" required>
        </div>

        <div class="field">
          <label>وحدة الإدخال</label>
          <select id="inputUnit" required>
            <option value="mg/dL">mg/dL</option>
            <option value="mmol/L">mmol/L</option>
          </select>
        </div>

        <div class="field">
          <label>الوقت (اختياري)</label>
          <input type="time" id="clock">
        </div>

        <div class="field wide">
          <label>ملاحظات (اختياري)</label>
          <input type="text" id="notes" placeholder="مثال: بعد نشاط خفيف">
        </div>

        <!-- يظهر فقط عند الارتفاع -->
        <div class="field wide hidden" id="corrWrap">
          <label>جرعة تصحيحية (مقترحة)</label>
          <div class="inline">
            <input type="number" step="0.5" id="correctionDose" placeholder="مثال: 1.5">
            <small id="corrHint" class="hint"></small>
          </div>
        </div>

        <!-- يظهر فقط عند الهبوط -->
        <div class="field wide hidden" id="raisedWrap">
          <label>رفعنا بإيه؟</label>
          <input type="text" id="raisedWith" placeholder="مثال: عصير، حليب، قطعة سكر">
        </div>

        <div class="actions">
          <button type="submit" id="saveBtn">حفظ</button>
          <button type="button" id="resetBtn" class="secondary">تفريغ النموذج</button>
        </div>
      </form>

      <p class="disclaimer">⚠️ الحسابات مساعدة فقط وليست نصيحة طبية — يُرجى الرجوع للطبيب دائمًا.</p>
    </section>

    <!-- المنطقة 3: جدول قياسات يوم محدد -->
    <section class="card">
      <div class="table-head">
        <h3>قياسات يوم: <span id="dayLabel">-</span></h3>
        <div class="inline">
          <label for="tableDate">اختر اليوم</label>
          <input type="date" id="tableDate">
        </div>
      </div>
      <div id="list" class="list"></div>
    </section>

  </div>

  <script type="module" src="js/measurements.js"></script>
</body>
</html>
