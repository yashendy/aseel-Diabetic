<!-- food-items.html (ูุณุฎุฉ ููุญุฏูุซุฉ ุชุฏุนู ุงูุงุณุชูุฑุงุฏ ูู OpenFoodFacts ุจุงูุจุงุฑููุฏ ูุงูุงุณู) -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ุงูุฃุตูุงู ุงูุบุฐุงุฆูุฉ</title>
  <link rel="stylesheet" href="css/food-items.css"/>
  <link rel="icon" href="data:,">
</head>
<body>
  <div class="container">
    <!-- ุฑุฃุณ -->
    <header class="top">
      <button class="back" onclick="history.back()">โฌ ุฑุฌูุน</button>
      <div class="title">
        <h1>๐ฝ๏ธ ููุชุจุฉ ุงูุฃุตูุงู ุงูุบุฐุงุฆูุฉ</h1>
        <p class="muted">ุฃุถูู ุงูุฃุตูุงูุ ุงูููุงุฏูุฑ ุงูุจูุชูุฉุ ูุงูููู ููู 100 ุฌุฑุงู. ุซู ุงุณุชุฎุฏููุง ูุงุญููุง ูู ุตูุญุฉ ุงููุฌุจุงุช.</p>
      </div>
    </header>

    <!-- ุฃุฏูุงุช -->
    <section class="controls card">
      <div class="grid">
        <div class="field">
          <label>ุจุญุซ ุจุงูุงุณู ุฃู #ูุงุดุชุงุฌ</label>
          <input type="text" id="search" placeholder="ูุซุงู: ุดููุงู ุฃู #ูุทูุฑ">
        </div>
        <div class="field">
          <label>ุชุตููู</label>
          <select id="category">
            <option value="ุงููู">ุงููู</option>
            <option>ูุดููุงุช</option>
            <option>ุญููุจ</option>
            <option>ูุงููุฉ</option>
            <option>ุฎุถุฑูุงุช</option>
            <option>ูุญูู</option>
            <option>ุฏููู</option>
          </select>
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button id="addBtn">โ ุฅุถุงูุฉ ุตูู</button>
        </div>
      </div>

      <!-- ุงุณุชูุฑุงุฏ ูู OpenFoodFacts -->
      <div class="import-row">
        <button id="importBarcodeBtn" class="secondary">๐ฆ ุงุณุชูุฑุงุฏ ุจุงูุจุงุฑููุฏ (OFF)</button>
        <button id="importSearchBtn" class="secondary">๐ ุงุณุชูุฑุงุฏ ุจุงูุงุณู (OFF)</button>
        <span class="hint">ุณูุชู ููุก ุงููููุฐุฌ ุชููุงุฆููุง ูููููู ุงููุฑุงุฌุนุฉ ูุจู ุงูุญูุธ.</span>
      </div>
    </section>

    <!-- ูุงุฆูุฉ ุงูุฃุตูุงู -->
    <section class="card">
      <div id="itemsGrid" class="items-grid"></div>
      <div id="emptyState" class="empty hidden">ูุง ุชูุฌุฏ ุฃุตูุงู ุจุนุฏโฆ ุงุถุบุท โุฅุถุงูุฉ ุตููโ.</div>
    </section>
  </div>

  <!-- ูููุฐุฌ ุฅุถุงูุฉ/ุชุนุฏูู -->
  <div id="itemModal" class="modal hidden">
    <div class="modal-body">
      <div class="modal-header">
        <h3 id="modalTitle">ุฅุถุงูุฉ ุตูู</h3>
        <button id="closeModal" class="close">โ</button>
      </div>

      <form id="itemForm" class="form-grid" novalidate>
        <div class="field">
          <label>ุงุณู ุงูุตูู *</label>
          <input type="text" id="name" required placeholder="ูุซุงู: ุดููุงู">
        </div>
        <div class="field">
          <label>ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ (ุงุฎุชูุงุฑู)</label>
          <input type="text" id="brand" placeholder="ูุซุงู: Quaker">
        </div>
        <div class="field">
          <label>ุงูุชุตููู *</label>
          <select id="cat" required>
            <option value="">ุงุฎุชุฑ</option>
            <option>ูุดููุงุช</option>
            <option>ุญููุจ</option>
            <option>ูุงููุฉ</option>
            <option>ุฎุถุฑูุงุช</option>
            <option>ูุญูู</option>
            <option>ุฏููู</option>
          </select>
        </div>
        <div class="field">
          <label>ุงููุตุฏุฑ</label>
          <select id="source">
            <option value="manual">manual</option>
            <option value="openfoodfacts">openfoodfacts</option>
          </select>
        </div>

        <div class="field wide">
          <label>ุฑุงุจุท ุตูุฑุฉ (ุงุฎุชูุงุฑู)</label>
          <input type="url" id="imageUrl" placeholder="https://โฆ">
        </div>
        <div class="field">
          <label>ุตูุฑุฉ ุชููุงุฆูุฉ ุฑูุฒูุฉ</label>
          <select id="autoImage">
            <option value="true">ููุนูู</option>
            <option value="false">ูุนุทู</option>
          </select>
        </div>

        <div class="field wide">
          <label>ูุงุดุชุงุฌุงุช (ุงูุตููุง ุจูุณุงูุฉ ุฃู ูุงุตูุฉ)</label>
          <input type="text" id="tags" placeholder="ูุทูุฑ ุณุฑูุน ุตุญู">
        </div>

        <div class="subhead">ุงูููู ููู 100 ุฌุฑุงู</div>
        <div class="field">
          <label>ุงููุงุฑุจ (g) *</label>
          <input type="number" id="carbs" step="any" required>
        </div>
        <div class="field">
          <label>ุงูุณุนุฑุงุช (kcal) *</label>
          <input type="number" id="cal" step="any" required>
        </div>
        <div class="field">
          <label>ุงูุจุฑูุชูู (g)</label>
          <input type="number" id="protein" step="any">
        </div>
        <div class="field">
          <label>ุงูุฏููู (g)</label>
          <input type="number" id="fat" step="any">
        </div>
        <div class="field">
          <label>ุงูุฃููุงู (g)</label>
          <input type="number" id="fiber" step="any">
        </div>
        <div class="field">
          <label>ุงูุณูุฑ (g)</label>
          <input type="number" id="sugar" step="any">
        </div>

        <div class="subhead">ุงูููุงุฏูุฑ ุงูุจูุชูุฉ</div>
        <div id="measuresWrap" class="measures"></div>
        <button type="button" id="addMeasure" class="secondary small">+ ุฅุถุงูุฉ ุชูุฏูุฑ ุจูุชู</button>

        <div class="subhead">ูุนุงููุฉ ุญุณุงุจ ุงููููุฉ</div>
        <div class="calc-grid">
          <div class="field">
            <label>ุทุฑููุฉ ุงูุฅุฏุฎุงู</label>
            <select id="calcMode">
              <option value="grams">ุฌุฑุงู</option>
              <option value="household">ุชูุฏูุฑ ุจูุชู</option>
            </select>
          </div>
          <div class="field">
            <label>ุงููููุฉ</label>
            <input type="number" id="calcQty" step="any" value="1">
          </div>
          <div class="field">
            <label>ุงูุชูุฏูุฑ ุงูุจูุชู</label>
            <select id="calcMeasure"></select>
          </div>
          <div class="preview">
            <div>ุงูุฌุฑุงูุงุช: <strong id="pGrams">0</strong> g</div>
            <div>ูุงุฑุจ: <strong id="pCarbs">0</strong> g</div>
            <div>ุณุนุฑุงุช: <strong id="pCal">0</strong> kcal</div>
            <div>ุจุฑูุชูู: <strong id="pProt">0</strong> g</div>
            <div>ุฏููู: <strong id="pFat">0</strong> g</div>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" id="saveBtn">ุญูุธ</button>
          <button type="button" id="cancelBtn" class="secondary">ุฅูุบุงุก</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ููุฏุงู: ุงุณุชูุฑุงุฏ ุจุงูุจุงุฑููุฏ -->
  <div id="offBarcodeModal" class="modal hidden">
    <div class="modal-body">
      <div class="modal-header">
        <h3>ุงุณุชูุฑุงุฏ ูู OpenFoodFacts โ ุจุงุฑููุฏ</h3>
        <button class="close" id="closeBarcodeModal">โ</button>
      </div>
      <div class="form-grid">
        <div class="field">
          <label>ุฑูู ุงูุจุงุฑููุฏ (EAN-13)</label>
          <input type="text" id="barcodeInput" placeholder="ูุซุงู: 7622210449283">
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button id="fetchBarcodeBtn">ุฌูุจ ุงูููุชุฌ</button>
        </div>
      </div>
      <div id="barcodeResult" class="off-result"></div>
    </div>
  </div>

  <!-- ููุฏุงู: ุงุณุชูุฑุงุฏ ุจุงูุงุณู -->
  <div id="offSearchModal" class="modal hidden">
    <div class="modal-body">
      <div class="modal-header">
        <h3>ุงุณุชูุฑุงุฏ ูู OpenFoodFacts โ ุงุณู ุงูููุชุฌ</h3>
        <button class="close" id="closeSearchModal">โ</button>
      </div>
      <div class="form-grid">
        <div class="field">
          <label>ุงุจุญุซ ุจุงุณู ุงูููุชุฌ</label>
          <input type="text" id="offQuery" placeholder="ูุซุงู: oats milk">
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button id="fetchSearchBtn">ุจุญุซ</button>
        </div>
      </div>
      <div id="searchResults" class="off-results-grid"></div>
    </div>
  </div>

  <script type="module" src="js/food-items.js"></script>
</body>
</html>
