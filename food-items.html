<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>๐ ููุชุจุฉ ุงูุฃุตูุงู</title>
  <link rel="stylesheet" href="css/food-items.css" />
  <link rel="icon" href="data:,">
</head>
<body>
  <div class="page">
    <!-- ุงูุดุฑูุท ุงูุนููู -->
    <header class="topbar card">
      <div class="left">
        <button class="btn ghost" onclick="history.back()">โฌ ุฑุฌูุน</button>
        <h1>๐ ููุชุจุฉ ุงูุฃุตูุงู</h1>
      </div>
      <div class="right">
        <label class="toggle">
          <input type="checkbox" id="togglePickMode">
          <span>ูุถุน ุงูุงุฎุชูุงุฑ ุฏุงุฎู ุงููุฌุจุงุช</span>
        </label>
        <button id="btnAdd" class="btn primary">+ ุฅุถุงูุฉ ุตูู</button>
      </div>
    </header>

    <!-- ููุงุชุฑ ูุจุญุซ -->
    <section class="filters card">
      <input id="q" class="input" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงููุงุดุชุงุฌโฆ (#ุฃุฑุฒ)" />
      <select id="fCat" class="input">
        <option value="">ูู ุงูุชุตูููุงุช</option>
        <option>ูุดููุงุช</option>
        <option>ุญููุจ</option>
        <option>ูุงููุฉ</option>
        <option>ุฎุถุฑูุงุช</option>
        <option>ูุญูู</option>
        <option>ุฏููู</option>
      </select>
      <select id="fSource" class="input">
        <option value="">ูู ุงููุตุงุฏุฑ</option>
        <option value="manual">manual</option>
        <option value="openfoodfacts">openfoodfacts</option>
      </select>
      <select id="fPhoto" class="input">
        <option value="">ุงูุตูุฑุฉ: ุงููู</option>
        <option value="with">ููุท ููุฌุฏ ุตูุฑุฉ</option>
        <option value="without">ููุท ุจูุง ุตูุฑุฉ</option>
      </select>
      <select id="fFav" class="input">
        <option value="">ุงูููุถูุงุช: ุงููู</option>
        <option value="only">ุงูููุถูุงุช ููุท</option>
        <option value="none">ุจุฏูู ููุถูุงุช</option>
      </select>
      <select id="fSort" class="input">
        <option value="name_asc">ุงูุงุณู (ุฃโู)</option>
        <option value="name_desc">ุงูุงุณู (ูโุฃ)</option>
        <option value="newest">ุงูุฃุญุฏุซ</option>
        <option value="oldest">ุงูุฃูุฏู</option>
      </select>
      <button id="btnClear" class="btn ghost">ูุณุญ ุงูููุงุชุฑ</button>
    </section>

    <!-- ุดุจูุฉ ุงูุฃุตูุงู -->
    <section id="grid" class="grid">ุฌุงุฑู ุงูุชุญูููโฆ</section>
  </div>

  <!-- Drawer: ูููุฐุฌ ุงูุตูู -->
  <aside id="drawer" class="drawer">
    <div class="drawer__content">
      <header class="drawer__header">
        <h2 id="formTitle">ุฅุถุงูุฉ ุตูู</h2>
        <button id="btnClose" class="icon-btn" title="ุฅุบูุงู">โ</button>
      </header>

      <form id="itemForm" class="form" novalidate>
        <input type="hidden" id="itemId" />

        <div class="row">
          <label>ุงุณู ุงูุตูู<span class="req">*</span></label>
          <input id="name" class="input" required />
        </div>

        <div class="row two">
          <div>
            <label>ุงูุจุฑุงูุฏ</label>
            <input id="brand" class="input" />
          </div>
          <div>
            <label>ุงูุชุตููู<span class="req">*</span></label>
            <select id="category" class="input" required>
              <option value="">โ ุงุฎุชูุฑ โ</option>
              <option>ูุดููุงุช</option>
              <option>ุญููุจ</option>
              <option>ูุงููุฉ</option>
              <option>ุฎุถุฑูุงุช</option>
              <option>ูุญูู</option>
              <option>ุฏููู</option>
            </select>
          </div>
        </div>

        <fieldset class="group">
          <legend>ุงูููู ููู 100g</legend>
          <div class="row three">
            <div>
              <label>ุงููุงุฑุจ (g)<span class="req">*</span></label>
              <input id="carb100" type="number" step="0.1" min="0" class="input" required />
            </div>
            <div>
              <label>ุงูุจุฑูุชูู (g)</label>
              <input id="prot100" type="number" step="0.1" min="0" class="input" />
            </div>
            <div>
              <label>ุงูุฏููู (g)</label>
              <input id="fat100" type="number" step="0.1" min="0" class="input" />
            </div>
          </div>
          <div class="row two">
            <div>
              <label>ุงูุณุนุฑุงุช (kcal) <small>(ููุญุณุจ ุชููุงุฆููุง ุฅุฐุง ุชูุฑู ูุงุฑุบูุง)</small></label>
              <input id="kcal100" type="number" step="1" min="0" class="input" />
            </div>
            <div class="hint">ุงูุณุนุฑุงุช โ 4รูุงุฑุจ + 4รุจุฑูุชูู + 9รุฏููู</div>
          </div>
          <div id="absorptionHint" class="absorption-hint"></div>
        </fieldset>

        <fieldset class="group">
          <legend>ุงูููุงุฏูุฑ ุงูููุฒููุฉ</legend>
          <div id="unitsList" class="units"></div>
          <div class="row two">
            <input id="uName" class="input" placeholder="ุงุณู ุงูููุฏุงุฑ (ููุจ/ูุนููุฉ/ุญุจุฉโฆ)" />
            <input id="uGrams" class="input" type="number" step="1" min="0" placeholder="ุงูุฌุฑุงู ุงูููุงูุฆ" />
          </div>
          <button id="btnAddUnit" type="button" class="btn">+ ุฅุถุงูุฉ ููุฏุงุฑ</button>
        </fieldset>

        <div class="row two">
          <div>
            <label>ุงูููุฑูุฏ</label>
            <input id="supplierName" class="input" placeholder="ุงุณู ุงูููุฑุฏ (ุงุฎุชูุงุฑู)" />
          </div>
          <div>
            <label>ุฑุงุจุท ุงูููุฑุฏ</label>
            <input id="supplierUrl" class="input" placeholder="https://โฆ (ุงุฎุชูุงุฑู)" />
          </div>
        </div>

        <div class="row">
          <label>ุฑุงุจุท ุตูุฑุฉ</label>
          <input id="imageUrl" class="input" placeholder="https://โฆ" />
          <div class="row two" style="gap:6px;margin-top:6px">
            <button id="btnAutoImage" type="button" class="btn ghost">ุชูููุฏ ุตูุฑุฉ ุชููุงุฆููุง</button>
            <input id="offBarcode" class="input" placeholder="ุจุงุฑููุฏ OpenFoodFacts" />
            <button id="btnImportByBarcode" type="button" class="btn">ุงุณุชูุฑุงุฏ ุจุงูุจุงุฑููุฏ</button>
            <button id="btnImportByName" type="button" class="btn">ุงุณุชูุฑุงุฏ ุจุงูุงุณู</button>
          </div>
        </div>

        <div class="row">
          <label>ูุงุดุชุงุฌุงุช (ุงูุตู ุจูููุง ุจูุงุตูุฉ)</label>
          <input id="tags" class="input" placeholder="#ุฃุฑุฒ, #ุฃูู, #ูุงุฑุจ" />
        </div>

        <div class="row">
          <label>ููุงุญุธุงุช</label>
          <textarea id="notes" class="input" rows="2"></textarea>
        </div>

        <div class="row two">
          <div>
            <label>ุงููุตุฏุฑ</label>
            <select id="source" class="input">
              <option value="manual">manual</option>
              <option value="openfoodfacts">openfoodfacts</option>
            </select>
          </div>
          <div class="meta">
            <small id="metaText">โ</small>
          </div>
        </div>

        <footer class="form__actions">
          <label class="fav-toggle">
            <input type="checkbox" id="favorite">
            <span>โญ ุฃุถูู ุฅูู ุงูููุถูุฉ</span>
          </label>
          <div style="flex:1"></div>
          <button type="submit" class="btn primary" id="btnSave">๐พ ุญูุธ</button>
          <button type="button" class="btn ghost" id="btnCancel">ุฅูุบุงุก</button>
        </footer>
      </form>
    </div>
  </aside>

  <!-- QR Modal -->
  <div id="qrModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="qrTitle">
    <div class="modal__card">
      <header class="modal__head">
        <h3 id="qrTitle">QR ููุตูู</h3>
        <button id="qrClose" class="icon-btn">โ</button>
      </header>
      <div class="modal__body">
        <img id="qrImage" alt="QR" />
        <div class="meta" id="qrHint"></div>
      </div>
    </div>
  </div>

  <!-- Snackbar (ุชูุจูู + ุชุฑุงุฌุน) -->
  <div id="snack" class="snackbar" hidden>
    <span id="snackText">ุชู</span>
    <button id="snackUndo" class="btn ghost">ุชุฑุงุฌุน</button>
  </div>

  <script type="module" src="js/food-items.js"></script>
</body>
</html>
