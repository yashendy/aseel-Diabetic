<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>๐ ููุชุจุฉ ุงูุฃุตูุงู</title>
  <link rel="stylesheet" href="css/food-items.css" />

  <!-- ESM Firebase setup -->
  <script type="module" src="js/firebase-config.js"></script>
</head>
<body>
  <div class="page">
    <header class="topbar card">
      <div class="left">
        <button class="btn ghost" onclick="history.back()">โฌ ุฑุฌูุน</button>
        <h1>๐ ููุชุจุฉ ุงูุฃุตูุงู</h1>
      </div>
      <div class="right">
        <button id="btnAdd" class="btn primary">+ ุฅุถุงูุฉ ุตูู</button>
      </div>
    </header>

    <section class="filters card">
      <input id="q" class="input" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู #ุชุงุฌ" autocomplete="off" />
      <select id="fCat" class="input"><option value="">ูู ุงูุชุตูููุงุช</option><option>ูุดููุงุช</option><option>ูุญูู</option><option>ุฎุถุฑูุงุช</option><option>ูุงููุฉ</option><option>ุฏููู</option></select>
      <select id="fSort" class="input"><option value="name">ุงูุงุณู</option><option value="newest">ุงูุฃุญุฏุซ</option></select>
      <button id="btnClear" class="btn ghost">ูุณุญ ุงูููุงุชุฑ</button>
    </section>

    <section id="grid" class="grid">ุฌุงุฑู ุงูุชุญูููโฆ</section>
  </div>

  <aside id="drawer" class="drawer">
    <div class="drawer__content">
      <header class="drawer__header">
        <h2 id="formTitle">ุฅุถุงูุฉ ุตูู</h2>
        <button id="btnClose" class="icon-btn">โ</button>
      </header>

      <form id="itemForm" class="form" novalidate>
        <!-- Basic Info -->
        <div class="row"><label for="name">ุงุณู ุงูุตูู*</label><input id="name" required class="input" /></div>
        <div class="row two">
          <div><label for="category">ุงูุชุตููู*</label><select id="category" required class="input"><option value="">โ ุงุฎุชูุฑ โ</option><option>ูุดููุงุช</option><option>ูุญูู</option><option>ุฎุถุฑูุงุช</option><option>ูุงููุฉ</option><option>ุฏููู</option></select></div>
          <div><label for="brand">ุงูุจุฑุงูุฏ</label><input id="brand" class="input" /></div>
        </div>

        <!-- Nutrition -->
        <fieldset class="group"><legend>ุงูููู ููู 100โฏg</legend>
          <div class="row three">
            <div><label for="carb100">ูุงุฑุจ*</label><input id="carb100" type="number" step="0.1" min="0" required class="input" /></div>
            <div><label for="prot100">ุจุฑูุชูู</label><input id="prot100" type="number" step="0.1" min="0" class="input" /></div>
            <div><label for="fat100">ุฏููู</label><input id="fat100" type="number" step="0.1" min="0" class="input" /></div>
          </div>
          <div class="row two"><div><label for="kcal100">ุณุนุฑุงุช</label><input id="kcal100" type="number" step="1" min="0" class="input" /></div><div class="hint">ุชูุญุณุจ ุชููุงุฆููุง ูู ูุงุฑุบ</div></div>
          <div id="absorptionHint" class="absorption-hint"></div>
        </fieldset>

        <!-- Image -->
        <div class="row">
          <label>ุตูุฑุฉ ุงูุตูู</label>
          <input type="file" id="imageFile" accept="image/*" />
          <input type="text" id="imageUrl" placeholder="ุฃู ุฑุงุจุท ุตูุฑุฉ" class="input" />
        </div>

        <!-- Barcode import -->
        <div class="row two">
          <input id="offBarcode" class="input" placeholder="ุจุงุฑููุฏ OpenFoodFacts" />
          <button type="button" id="btnImportByBarcode" class="btn">ุงุณุชูุฑุงุฏ</button>
        </div>

        <!-- Household Units -->
        <fieldset class="group"><legend>ููุงุฏูุฑ ููุฒููุฉ</legend>
          <div id="unitsList" class="units"></div>
          <div class="row two"><input id="uName" placeholder="ุงุณู ุงูููุฏุงุฑ" class="input" /><input id="uGrams" placeholder="ุฌุฑุงู" type="number" class="input" /></div>
          <button type="button" id="btnAddUnit" class="btn">+ ุฅุถุงูุฉ ููุฏุงุฑ</button>
        </fieldset>

        <!-- Tags -->
        <div class="row"><label for="tags">ุชุงุฌุงุช</label><input id="tags" placeholder="#ุฃุฑุฒ, #ุณูุงู" class="input" /></div>

        <footer class="form__actions">
          <button type="submit" class="btn primary">ุญูุธ</button>
          <button type="button" class="btn ghost" id="btnCancel">ุฅูุบุงุก</button>
        </footer>
      </form>
    </div>
  </aside>

  <script type="module" src="js/food-items.js"></script>
</body>
</html>
