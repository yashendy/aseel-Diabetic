<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>مكتبة الأصناف — أدمن</title>
<link rel="icon" href="data:,">
<link rel="stylesheet" href="css/food-items.css">
<script src="js/dictionaries.js"></script>
<script type="module" src="js/food-items.js"></script>
</head>
<body>
<header class="app-header">
  <h1>مكتبة الأصناف</h1>
  <div class="spacer"></div>
  <button id="btnNew" class="btn">إضافة صنف</button>
</header>

<main class="container">
<section class="filters">
  <input id="q" class="input" placeholder="بحث بالاسم/البراند/الفئة أو #وسم"/>
  <select id="category" class="input"><option value="">الفئة (الكل)</option></select>
  <label class="switch"><input type="checkbox" id="onlyActive" checked><span>نشط فقط</span></label>
</section>

<section id="grid" class="grid"></section>

<dialog id="editor" class="modal">
<form method="dialog" class="card">
<header class="modal__header">
  <h3 id="formTitle">إضافة صنف</h3>
  <button id="closeModal" class="close" type="button">✕</button>
</header>

<div class="form">
<div class="row">
  <label class="field"><span>الاسم (AR)</span><input id="name_ar"/></label>
  <label class="field"><span>البراند (AR)</span><input id="brand_ar"/></label>
</div>

<div class="row">
  <label class="field full"><span>وصف (AR)</span><input id="desc_ar"/></label>
</div>

<div class="row">
  <label class="field"><span>الفئة</span><select id="category_in"></select></label>
  <label class="field"><span>رابط صورة</span><input id="imageUrl" placeholder="https://"/></label>
  <label class="field"><span>GI</span><input id="gi" type="number" step="any" placeholder="مثال: 73"/></label>
</div>

<fieldset class="box"><legend>القيم الغذائية لكل 100g</legend>
<div class="row">
  <label class="field"><span>السعرات (kcal)</span><input id="cal_kcal" type="number" step="any"/></label>
  <label class="field"><span>الكارب (g)</span><input id="carbs_g" type="number" step="any"/></label>
  <label class="field"><span>الألياف (g)</span><input id="fiber_g" type="number" step="any"/></label>
</div>
<div class="row">
  <label class="field"><span>البروتين (g)</span><input id="protein_g" type="number" step="any"/></label>
  <label class="field"><span>الدهون (g)</span><input id="fat_g" type="number" step="any"/></label>
  <label class="field"><span>الصوديوم (mg)</span><input id="sodium_mg" type="number" step="any"/></label>
</div>
</fieldset>

<fieldset class="box">
<legend>المقادير البيتية</legend>
<div id="measuresList" class="measures"></div>
<div class="row">
  <input id="m_name_ar" class="input" placeholder="اسم AR"/>
  <input id="m_name_en" class="input" placeholder="Name EN (اختياري)"/>
  <input id="m_grams" class="input" type="number" step="any" placeholder="جرام"/>
  <button id="addMeasure" type="button" class="btn btn--ghost">➕ إضافة مقدار</button>
</div>
</fieldset>

<div class="row">
  <label class="field full"><span>#Tags</span><input id="tags"/></label>
</div>
<div class="row">
  <label class="field full"><span>dietTags</span><input id="dietTags" placeholder="low-gi, halal"/></label>
</div>
<div class="row">
  <label class="field full"><span>allergens</span><input id="allergens" placeholder="gluten, peanut"/></label>
</div>

<div class="row">
  <label class="switch"><input type="checkbox" id="isActive" checked/> <span>نشط</span></label>
  <div class="spacer"></div>
  <button id="save" type="button" class="btn">حفظ</button>
</div>
<input type="hidden" id="docId"/>
</div>
</form>
</dialog>
</main>

<style>
:root{--bg:#fff;--text:#111;--muted:#6b7280;}
body{background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,ui-sans-serif;margin:0}
.app-header{display:flex;align-items:center;gap:8px;padding:18px 22px;border-bottom:1px solid #eee}
.btn{background:#111;color:#fff;border:0;border-radius:10px;padding:10px 14px;cursor:pointer}
.btn--ghost{background:#eef2ff;color:#111}
.container{padding:20px}
.filters{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:14px}
.input{padding:10px 12px;border:1px solid #e5e7eb;border-radius:10px;min-width:200px}
.switch{display:flex;align-items:center;gap:6px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:14px}
.card{background:#fff;border:1px solid #eee;border-radius:14px;box-shadow:0 1px 2px rgba(0,0,0,.04);padding:14px}
.item{display:flex;gap:12px;align-items:flex-start}
.item img{width:72px;height:72px;object-fit:cover;border-radius:10px;border:1px solid #eee;background:#fafafa}
.pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px dashed #e5e7eb;font-size:12px}
.modal{border:0;border-radius:16px;max-width:980px;width:96%}
.modal__header{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px solid #eee}
.form{padding:14px;display:flex;flex-direction:column;gap:12px}
.row{display:flex;gap:12px;flex-wrap:wrap}
.field{display:flex;flex-direction:column;gap:6px;min-width:220px;flex:1}
.field.full{min-width:100%}
.field input,.field select{padding:10px 12px;border:1px solid #e5e7eb;border-radius:10px}
.box{border:1px dashed #e5e7eb;border-radius:12px;padding:12px}
.measures{display:flex;gap:8px;flex-wrap:wrap}
.close{border:0;background:transparent;font-size:18px;cursor:pointer}
</style>
</body>
</html>
