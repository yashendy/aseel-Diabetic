<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ูุฌุจุฉ ุงูุทูู</title>
  <link rel="stylesheet" href="./css/meals.css" />
  <link rel="icon" href="./favicon.ico" />
</head>
<body>

  <header class="topbar">
    <div class="brand" id="brand-title">๐ฝ๏ธ ูุฌุจุฉ ุงูุทูู</div>
    <div class="spacer"></div>
    <div id="child-meta" class="muted"></div>
  </header>

  <main class="page">

    <!-- ุดุฑูุท ุงูุชุญูู -->
    <section class="card soft">
      <div class="row wrap g8">
        <div class="field">
          <label for="dateInput">ุชุงุฑูุฎ</label>
          <input id="dateInput" type="date" />
        </div>
        <div class="field">
          <label for="mealType">ููุน ุงููุฌุจุฉ</label>
          <select id="mealType">
            <option value="breakfast">ูุทุงุฑ</option>
            <option value="lunch">ุบุฏุงุก</option>
            <option value="dinner">ุนุดุงุก</option>
            <option value="snack">ุณูุงู</option>
          </select>
        </div>
        <button id="btn-open-picker" class="btn primary">ุฅุถุงูุฉ ุตูู ูู ุงูููุชุจุฉ</button>
        <button id="btn-save-template" class="btn">ุญูุธ ููุฌุจุฉ ุฌุงูุฒุฉ</button>
        <button id="btn-open-templates" class="btn ghost">ูุฌุจุฉ ุฌุงูุฒุฉ ๐ฑ</button>
        <div class="spacer"></div>
        <div class="muted">ุงูููู: <span id="today-label"></span></div>
      </div>
    </section>

    <!-- ุงูููุงุณุงุช ู ุงูุฌุฑุนุงุช -->
    <section class="card">
      <div class="section-title">ุงูููุงุณุงุช ูุงูุฌุฑุนุงุช</div>
      <div class="grid3">
        <div class="field">
          <label>ููุงุณ ูุจู ุงููุฌุจุฉ</label>
          <input id="preMealInput" type="number" step="0.1" placeholder="โ" />
        </div>
        <div class="field">
          <label>ููุงุณ ุจุนุฏ ุงููุฌุจุฉ</label>
          <input id="postMealInput" type="number" step="0.1" placeholder="โ" />
        </div>
        <div class="field">
          <label>ููุงุญุธุงุช (ุงุฎุชูุงุฑู)</label>
          <input id="notes" type="text" placeholder="ูุซุงู: ูุฌุจุฉ ุฎูููุฉ" />
        </div>
      </div>

      <div class="grid3">
        <div class="field">
          <label>ุฌุฑุนุฉ ุงูุชุตุญูุญ</label>
          <input id="corrDoseInput" type="number" step="0.1" placeholder="0" />
        </div>
        <div class="field">
          <label>ุฌุฑุนุฉ ุงููุงุฑุจ</label>
          <input id="carbDoseInput" type="number" step="0.1" placeholder="0" />
        </div>
        <div class="field">
          <label>ุฅุฌูุงูู ุงูุฌุฑุนุฉ</label>
          <input id="totalDoseInput" type="number" step="0.1" placeholder="0" />
        </div>
      </div>
      <div class="muted sm" id="dose-hints"></div>
    </section>

    <!-- ุฃุตูุงู ุงููุฌุจุฉ -->
    <section class="card">
      <div class="section-title">ุงูุฃุตูุงู ุงููุถุงูุฉ</div>
      <div class="table-scroll">
        <table class="table">
          <thead>
            <tr>
              <th style="width:34%">ุงูุตูู</th>
              <th>ุงูุชูุฏูุฑ ุงูุจูุชู</th>
              <th>ุงููููุฉ</th>
              <th>ุงูุฌุฑุงูุงุช</th>
              <th>ูุงุฑุจ (g)</th>
              <th>ุจุฑูุชูู (g)</th>
              <th>ุฏููู (g)</th>
              <th>ุณุนุฑุงุช (kcal)</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="items-body"></tbody>
        </table>
      </div>
      <div class="totals">
        <div>ุงูุฅุฌูุงูู: ูุงุฑุจ <b id="t-carbs">0</b> โข ุจุฑูุชูู <b id="t-protein">0</b> โข ุฏููู <b id="t-fat">0</b> โข ุณุนุฑุงุช <b id="t-cal">0</b></div>
      </div>
    </section>

    <!-- ูุณุงุนุฏ ุฐูู -->
    <section class="card" id="ai-panel">
      <div class="section-title">ุงููุณุงุนุฏ ุงูุฐูู ๐ค</div>
      <div id="ai-tips" class="tips"></div>
      <div class="row g8" style="margin-top:8px">
        <button id="btn-refresh-ai" class="btn">ุชุญุฏูุซ ุงููุตุงุฆุญ</button>
      </div>
    </section>

  </main>

  <!-- ููุฏุงู ุงุฎุชูุงุฑ ุตูู -->
  <dialog id="dlg-picker" class="dialog">
    <div class="dialog-header">
      <div>ุงุฎุชูุงุฑ ุตูู ูู ููุชุจุฉ ุงูุฃุตูุงู</div>
      <button class="icon" id="close-picker">โ</button>
    </div>
    <div class="dialog-body">
      <div class="row g8">
        <input id="picker-search" type="search" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ูุงุดุชุงุฌโฆ" />
      </div>
      <div id="picker-grid" class="grid"></div>
      <div id="picker-empty" class="empty" hidden>ูุง ุชูุฌุฏ ูุชุงุฆุฌ ูุทุงุจูุฉ.</div>
    </div>
  </dialog>

  <!-- ููุฏุงู ุงููุฌุจุงุช ุงูุฌุงูุฒุฉ -->
  <dialog id="dlg-templates" class="dialog">
    <div class="dialog-header">
      <div>ูุฌุจุฉ ุฌุงูุฒุฉ ๐ฑ</div>
      <button class="icon" id="close-templates">โ</button>
    </div>
    <div class="dialog-body">
      <div class="row g8">
        <input id="tpl-search" type="search" placeholder="ุจุญุซ ุจุงุณู ุงููุงูุจโฆ" />
      </div>
      <div id="tpl-list" class="grid"></div>
      <div id="tpl-empty" class="empty" hidden>ูุง ุชูุฌุฏ ููุงูุจ ูุญููุธุฉ ุจุนุฏ.</div>
    </div>
  </dialog>

  <!-- ููุฏุงู ุญูุธ ููุงูุจ -->
  <dialog id="dlg-save" class="dialog">
    <div class="dialog-header">
      <div>ุญูุธ ููุฌุจุฉ ุฌุงูุฒุฉ</div>
      <button class="icon" id="close-save">โ</button>
    </div>
    <form id="save-form" class="dialog-body">
      <div class="grid2">
        <div class="field">
          <label>ุงุณู ุงููุฌุจุฉ</label>
          <input id="tpl-name" type="text" placeholder="ูุซุงู: ุบุฏุงุก ุณุฑูุน" required />
        </div>
        <div class="field">
          <label>ููุน ุงููุฌุจุฉ</label>
          <select id="tpl-type">
            <option value="lunch">ุบุฏุงุก</option>
            <option value="breakfast">ุฅูุทุงุฑ</option>
            <option value="dinner">ุนุดุงุก</option>
            <option value="snack">ุณูุงู</option>
          </select>
        </div>
      </div>
      <div class="dialog-footer">
        <button type="button" class="btn ghost" id="cancel-save">ุฅูุบุงุก</button>
        <div class="spacer"></div>
        <button type="submit" class="btn primary">ุญูุธ</button>
      </div>
    </form>
  </dialog>

  <!-- Firebase config -->
  <script type="module" src="./js/firebase-config.js"></script>
  <!-- ุณูุฑุจุช ุงูุตูุญุฉ (ูุญุชูู ูุฒูุฏ ุงูููุชุจุฉ ุฏุงุฎูู) -->
  <script type="module" src="./js/meals.js"></script>
</body>
</html>
