<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ุงููุฌุจุงุช</title>
  <link rel="stylesheet" href="css/meals.css" />
</head>
<body>
  <!-- Loader -->
  <div id="appLoader" class="app-loader">
    <div class="spinner"></div>
    <div>ูุฌุฑู ุงูุชุญูููโฆ</div>
  </div>

  <main class="page">
    <header class="page__header">
      <a class="btn btn--link" id="btnBack" href="child.html">ุฑุฌูุน ูุตูุญุฉ ุงูุทูู</a>
      <div class="chips">
        <span class="chip">CF: <b id="chipCF">โ</b></span>
        <span class="chip">CR: <b id="chipCR">โ</b></span>
        <span class="chip">ุงููุฏู: <b id="chipTargets">โ</b></span>
      </div>
      <h1 id="childName" class="title">โ</h1>
    </header>

    <section class="layout">
      <!-- ููุญุฉ ุงูููู -->
      <aside class="panel">
        <h2 class="panel__title">ููุญุฉ ุงูููู</h2>

        <div class="field">
          <label for="slotSelect">ุงููุฌุจุฉ</label>
          <select id="slotSelect">
            <option value="breakfast">ูุทุงุฑ</option>
            <option value="lunch">ุบุฏุง</option>
            <option value="dinner">ุนุดุง</option>
            <option value="snack">ุณูุงู</option>
          </select>
        </div>

        <div class="field">
          <label for="dateInput">ุชุงุฑูุฎ ุงููุฌุจุฉ</label>
          <input id="dateInput" type="date" />
        </div>

        <div class="field">
          <label for="mealTime">ููุช ุงููุฌุจุฉ (ุฑุจุท ุงูููุงุณ)</label>
          <input id="mealTime" type="time" step="60" />
        </div>

        <div class="field">
          <label for="preBg">ูุฑุงุกุฉ ูุจู ุงููุฌุจุฉ (mmol/L)</label>
          <div class="input-row">
            <input id="preBg" type="number" step="0.1" inputmode="decimal" />
            <button id="btnFetchPre" class="btn">ุฌูุจ ุชููุงุฆู</button>
          </div>
        </div>

        <div class="field">
          <label for="netCarbRule">ูุงุนุฏุฉ ุตุงูู ุงููุงุฑุจ</label>
          <select id="netCarbRule">
            <option value="none">ุจุฏูู ุฎุตู ุงูุฃููุงู</option>
            <option value="halfFiber">ุฎุตู ูุตู ุงูุฃููุงู</option>
            <option value="fullFiber">ุฎุตู ูุงูู ุงูุฃููุงู</option>
          </select>
        </div>

        <div class="field">
          <label for="doseCorrection">ุฌุฑุนุฉ ุงูุชุตุญูุญ (U)</label>
          <input id="doseCorrection" type="number" step="0.1" inputmode="decimal" />
        </div>

        <div class="field">
          <label for="doseCarbs">ุฌุฑุนุฉ ุงููุงุฑุจ (U)</label>
          <input id="doseCarbs" type="number" step="0.1" inputmode="decimal" />
        </div>

        <div class="field">
          <label for="dayCarbs">ุฅุฌูุงูู ูุงุฑุจ ุงูููู: g</label>
          <input id="dayCarbs" type="number" step="1" />
        </div>

        <div class="progress">
          <div id="progressBar" class="progress__bar" style="width:0%"></div>
        </div>

        <div class="actions">
          <button id="btnScaleToTarget" class="btn btn--primary">ุงุถุจุท ูููุตูู ูููุฏู</button>
          <button id="btnClearMeal" class="btn">ูุณุญ</button>
          <button id="btnOpenLibrary" class="btn btn--ghost">ุงูุชุญ ููุชุจุฉ ุงูุฃุตูุงู</button>
        </div>
      </aside>

      <!-- ูุฌุจุฉ ุงูููู -->
      <section class="panel panel--main">
        <h2 class="panel__title">ูุฌุจุฉ ุงูููู</h2>

        <div class="table-wrap">
          <table id="mealTable" class="table">
            <thead>
              <tr>
                <th>ุญุฐู</th>
                <th>GL</th>
                <th>GI</th>
                <th>ุฃููุงู</th>
                <th>Net Carbs</th>
                <th>Calories</th>
                <th>ูุงุฑุจ (raw)</th>
                <th>ุฌุฑุงู</th>
                <th>ุงููุญุฏุฉ</th>
                <th>ุงูุตูู</th>
                <th>ุงูุตูุฑุฉ</th>
              </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
              <tr class="totals">
                <td>โ</td>
                <td id="sumGL">0</td>
                <td id="sumGI">โ</td>
                <td id="sumFiber">0 g</td>
                <td id="sumCarbsNet">0 g</td>
                <td id="sumCalories">0 kcal</td>
                <td id="sumCarbsRaw">0 g</td>
                <td colspan="4">
                  ุงูุฌุฑุนุฉ ุงูููุงุฆูุฉ:
                  <b><span id="doseFinal">โ</span> U</b>
                </td>
              </tr>
            </tfoot>
          </table>
        </div>

        <div class="actions actions--right">
          <button id="btnSaveMeal" class="btn btn--primary">ุญูุธ ุงููุฌุจุฉ</button>
          <button id="btnSaveTemplate" class="btn">ุญูุธ ููุงูุจ</button>
          <button id="btnLoadTemplates" class="btn">ุงุณุชูุฑุงุฏ ูู ุงูููุงูุจ</button>
          <button id="btnExportCSV" class="btn">ุชุตุฏูุฑ (CSV)</button>
          <button id="btnPrint" class="btn">ุชุตุฏูุฑ PDF</button>
        </div>
      </section>
    </section>
  </main>

  <!-- ููุชุจุฉ ุงูุฃุตูุงู -->
  <div id="libModal" class="lib-modal" aria-hidden="true">
    <div id="libOverlay" class="lib-overlay" data-close="true"></div>
    <div class="lib-panel" role="dialog" aria-modal="true" aria-labelledby="libTitle">
      <header class="lib-header">
        <h3 id="libTitle">ูู ุตูู ูุน ุฑุจุญ ุชูุตููู - ูู ุตูู ููู GI/GL ููููุชู ููู 100ุฌู</h3>
        <button id="libClose" class="lib-close" aria-label="ุฅุบูุงู" data-close="true">ร</button>
      </header>

      <div class="lib-toolbar">
        <input id="searchBox" type="search" placeholder="ุงุจุญุซ ุจุงูุงุณู/ุงููุฆุฉโฆ" />
        <div class="legend">
          <span class="fav">โญ ููุถู</span>
          <span class="unfav">๐ซ ุบูุฑ ููุถูู</span>
          <span class="count"><span id="libCount">0</span> :ุงูุนุฏุฏ</span>
        </div>
      </div>

      <div id="itemsGrid" class="grid"></div>
    </div>
  </div>

  <script type="module" src="js/meals.js" defer></script>
</body>
</html>
