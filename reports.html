<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>التقارير</title>
  <link rel="stylesheet" href="./css/reports.css" />
  <style>
    /* أساسيات وتنسيق سريع */
    :root { --radius: 14px; }
    * { box-sizing: border-box; }
    body { font-family: system-ui, "Segoe UI", Tahoma, Arial; background:#f7f9fc; color:#111; margin:0; }
    .container { max-width: 1200px; margin: 24px auto; padding: 0 16px; }
    h1 { font-size: 22px; margin: 0 0 14px; }

    .filters { display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 8px; align-items: end; margin-bottom: 12px; }
    .filters .field { display:flex; flex-direction:column; gap:6px; }
    .filters label { font-size: 12px; color:#555; }
    .filters input[type="date"]{ padding:8px 10px; border:1px solid #d8e1ef; border-radius: 10px; background:#fff; }
    .filters .unit { padding:8px 10px; border:1px dashed #d8e1ef; border-radius: 10px; background:#fff; color:#333; }
    .btn { padding:10px 14px; border-radius: 12px; border:0; cursor:pointer; }
    .btn.primary { background:#2563eb; color:#fff; }
    .muted { color:#6b7280; }
    .legend { display:flex; gap:8px; align-items:center; margin: 10px 0 14px; }
    .chip { font-size:12px; padding:4px 8px; border-radius:999px; background:#eef2ff; color:#3730a3; }
    .chip.ok { background:#e8fff1; color:#047857; }
    .chip.warn { background:#fff7ed; color:#9a3412; }
    .chip.danger { background:#ffe4e6; color:#9f1239; }

    .table-wrap { overflow:auto; background:#fff; border:1px solid #e5e7eb; border-radius: var(--radius); }
    table { border-collapse: separate; border-spacing:0; width:100%; min-width: 960px; }
    thead th { position:sticky; top:0; background:#f3f4f6; color:#111827; font-weight:600; font-size:13px; text-align:center; padding:10px; border-bottom:1px solid #e5e7eb; }
    tbody td, tbody th { padding:8px 10px; border-bottom:1px solid #f1f5f9; vertical-align:top; }
    tbody th { background:#fafafa; white-space:nowrap; }

    .cell { display:grid; grid-template-rows: repeat(4, auto); gap:4px; min-width:150px; }
    .line { display:flex; align-items:center; gap:8px; font-size:12px; color:#111; }
    .line .label { color:#6b7280; min-width:64px; white-space:nowrap; }
    .value { font-weight:600; }
    .notes-text { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:180px; }
    [title].notes-text { cursor:help; }

    .badge { font-size:11px; padding:2px 8px; border-radius:999px; border:1px solid transparent; }
    .b-normal { background:#e8fff1; color:#065f46; border-color:#b7f4cd; }
    .b-low { background:#e0f2fe; color:#075985; border-color:#bae6fd; }
    .b-high { background:#fff7ed; color:#9a3412; border-color:#fed7aa; }
    .b-sevlow { background:#dbeafe; color:#1e3a8a; border-color:#bfdbfe; }
    .b-sevhigh{ background:#ffe4e6; color:#9f1239; border-color:#fecdd3; }

    .trend { display:inline-flex; align-items:center; gap:4px; }
    .trend svg { width:14px; height:14px; }
    .trend .dot { fill:#111827; opacity:.75; }
    .trend .arrow { stroke:#111827; stroke-width:2; fill:none; }

    .empty { color:#9ca3af; }
    .loader { display:none; }
    .loader.show { display:block; margin:6px 0; }
    .footer { display:flex; justify-content:space-between; align-items:center; margin-top:10px; font-size:12px; color:#6b7280; }
    @media (max-width: 720px){
      .filters { grid-template-columns: 1fr 1fr; }
      .cell { min-width: 200px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>التقارير</h1>

    <div class="filters">
      <div class="field">
        <label>من</label>
        <input id="f_from" type="date">
      </div>
      <div class="field">
        <label>إلى</label>
        <input id="f_to" type="date">
      </div>
      <div class="field">
        <label>الوحدة</label>
        <div id="unitBadge" class="unit muted">—</div>
      </div>
      <div>
        <button id="btnLoad" class="btn primary">عرض</button>
      </div>
    </div>

    <div class="legend">
      <span class="chip ok">طبيعي</span>
      <span class="chip">هبوط</span>
      <span class="chip warn">ارتفاع</span>
      <span class="chip danger">شديد</span>
    </div>

    <div id="loader" class="loader">… جاري التحميل</div>

    <div class="table-wrap">
      <table id="repTable" aria-label="جدول التقرير">
        <thead>
          <tr id="repHead">
            <!-- يُملأ برمجيًا -->
          </tr>
        </thead>
        <tbody id="repBody">
          <!-- يُملأ برمجيًا -->
        </tbody>
      </table>
    </div>

    <div class="footer">
      <div>يتم اعتماد حدود اللون من إعدادات الطفل.</div>
      <div id="rangeCaption" class="muted"></div>
    </div>
  </div>

  <script type="module" src="./js/reports.js"></script>
</body>
</html>
