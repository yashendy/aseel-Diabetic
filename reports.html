<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <!--
    =========================  ููุงุญุธุงุช ุชูุซูููุฉ ูุฎุชุตุฑุฉ  =========================
    ูุฐู ุงูุตูุญุฉ ุชุถูู:
    - ุชุณููุงุช ุนุฑุจูุฉ ูุฎุชุตุฑุฉ ูููุช ุงูููุงุณ (ู. ุงููุทุงุฑ / ุจ. ุงูุบุฏุงุก / ุงูุงุณุชููุงุธ / ู. ุงููููโฆ)
    - ุนุฑุถ ุฃูู 10 ุตููู + ุฒุฑ "ุนุฑุถ ุงููุฒูุฏ (10)"
    - ููุชุฑุฉ (ุงูุญุงูุฉ/ุงูููุช/ูุฌูุฏ ุชุตุญูุญ/ุนูุงุฌ ูุจูุท/ููุงุญุธุงุช) + ุชุฑุชูุจ (ุชุงุฑูุฎ/ูุฑุงุกุฉ)
    - ููุฎุต ุฐูู ุฃุนูู ุงูุฌุฏูู (ูุชูุณุทุ ูุณูุทุ SDุ TIRุ ุนุฏุฏ ูุจูุท/ุงุฑุชูุงุนุ ุฃููุงุท ุจุงุฑุฒุฉ)
    - Heatmap (ุฃูุงู ร ูุชุฑุงุช) + Histogram ููุชูุฒูุน
    - ูุณุงุนุฏ ุงูุชุฑุงุถู (Chatbot) ุฎููู ูุนูู ุนูู ุงูุจูุงูุงุช ุงููุญููุฉ (ุจุฏูู ุฅุฑุณุงู ุฎุงุฑุฌู)
    ============================================================================
  -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ุงูุชูุงุฑูุฑ</title>

  <link rel="icon" type="image/x-icon" href="favicon.ico" />
  <link rel="stylesheet" href="css/reports.css" />
</head>
<body>
  <div class="container">
    <header class="card child-info">
      <button class="btn back" onclick="history.back()">โฌ ุฑุฌูุน</button>

      <div class="head">
        <h1>ุงูุชูุงุฑูุฑ โ <span id="childName">ุทูู</span> <span class="ic">๐งพ</span></h1>
        <p class="muted" id="childMeta">โ</p>
        <div class="chips">
          <span class="chip" id="chipRange">ุงููุทุงู: โ</span>
          <span class="chip" id="chipCR">CR: โ</span>
          <span class="chip" id="chipCF">CF: โ</span>
        </div>
      </div>

      <div class="controls">
        <div class="range">
          <label>ูู</label>
          <input type="date" id="fromDate">
          <label>ุฅูู</label>
          <input type="date" id="toDate">
          <label>ุงููุญุฏุฉ</label>
          <select id="outUnit">
            <option value="mmol">mmol/L</option>
            <option value="mgdl">mg/dL</option>
          </select>
        </div>

        <div class="actions">
          <button id="toggleNotes" class="btn">ุฅุฎูุงุก ุงูููุงุญุธุงุช</button>
          <button id="csvBtn" class="btn">๐ฅ ุชูุฒูู CSV</button>
          <a id="openAnalytics" class="btn primary">ุชุญููู ุงูููุงุณุงุช</a>
          <a id="openPrint" class="btn">ูุฑุงุฌุนุฉ ุงูุชูุฑูุฑ (ูุทุจูุน) ๐จ๏ธ</a>
          <a id="openBlank" class="btn">ุชูุฑูุบ ูุฑู ุฃุณุจูุน ๐</a>
        </div>
      </div>
      <p id="densityHint" class="muted small">ุณูุชู ุชูุนูู ุนุฑุถ ูุซูู ุชููุงุฆููุง ุนูุฏ ุชุนุฏูู 150 ุตู.</p>
    </header>

    <!-- ููุฎุต ุฐูู -->
    <section class="card insights" id="insightsCard">
      <h2>ููุฎุต ุงููุชุฑุฉ (AI)</h2>
      <div id="insightsKPIs" class="kpis"></div>
      <div id="insightsFindings" class="findings"></div>
    </section>

    <!-- ุดุฑูุท ููุงุชุฑ ูุชุฑุชูุจ -->
    <section class="card filters" id="filtersBar">
      <div class="filters-row">
        <div class="filter">
          <label for="filterState">ุงูุญุงูุฉ</label>
          <select id="filterState">
            <option value="all">ุงููู</option>
            <option value="low">ูุจูุท</option>
            <option value="ok">ุทุจูุนู</option>
            <option value="high">ุงุฑุชูุงุน</option>
          </select>
        </div>
        <div class="filter">
          <label for="filterSlot">ููุช ุงูููุงุณ</label>
          <select id="filterSlot">
            <option value="all">ุงููู</option>
            <!-- ููููุฃ ุชููุงุฆููุง ูู JS ูุถูุงู ููุณ ุงูุชุฑุชูุจ -->
          </select>
        </div>
        <div class="filter">
          <label for="filterCorr">ุงูุชุตุญูุญ</label>
          <select id="filterCorr">
            <option value="any">ุงููู</option>
            <option value="with">ุจูุฌูุฏ ุชุตุญูุญ</option>
            <option value="without">ุจุฏูู ุชุตุญูุญ</option>
          </select>
        </div>
        <div class="filter">
          <label for="filterHypo">ุนูุงุฌ ุงููุจูุท</label>
          <select id="filterHypo">
            <option value="any">ุงููู</option>
            <option value="with">ุจูุฌูุฏ ุนูุงุฌ</option>
            <option value="without">ุจุฏูู ุนูุงุฌ</option>
          </select>
        </div>
        <div class="filter">
          <label for="filterNotes">ููุงุญุธุงุช</label>
          <select id="filterNotes">
            <option value="any">ุงููู</option>
            <option value="with">ุจูุฌูุฏ ููุงุญุธุงุช</option>
            <option value="without">ุจุฏูู ููุงุญุธุงุช</option>
          </select>
        </div>
        <div class="filter">
          <label for="sortBy">ุชุฑุชูุจ</label>
          <select id="sortBy">
            <option value="date_desc">ุงูุฃุญุฏุซ ุฃููุงู</option>
            <option value="date_asc">ุงูุฃูุฏู ุฃููุงู</option>
            <option value="read_asc">ุงููุฑุงุกุฉ ุชุตุงุนุฏู</option>
            <option value="read_desc">ุงููุฑุงุกุฉ ุชูุงุฒูู</option>
          </select>
        </div>
      </div>
    </section>

    <section class="card table" id="tableSection">
      <h2>ููุงุณุงุช ุงููุชุฑุฉ</h2>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>ุงูุชุงุฑูุฎ</th>
              <th>ุงูููุช</th>
              <th>ุงููุฑุงุกุฉ</th>
              <th>ุงูุญุงูุฉ</th>
              <th>ุงูุชุตุญูุญ</th>
              <th>ุนูุงุฌ ุงููุจูุท</th>
              <th class="col-notes">ููุงุญุธุงุช</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <tr><td colspan="7" class="muted center">โ</td></tr>
          </tbody>
        </table>
      </div>

      <!-- ุนุฑุถ ุงููุฒูุฏ -->
      <div class="table-more">
        <span id="visibleInfo" class="muted small">โ</span>
        <button id="showMore" class="btn">ุนุฑุถ ุงููุฒูุฏ (10)</button>
      </div>
    </section>

    <!-- ุชุญูููุงุช ูุตุบุฑุฉ -->
    <section class="card analytics" id="analyticsMini">
      <h2>ุชุญูููุงุช ูุตุบูุฑุฉ</h2>
      <div class="analytics-grid">
        <div>
          <h3 class="muted">Heatmap (ุฃูุงู ร ูุชุฑุงุช)</h3>
          <div id="heatmap" class="heatmap"></div>
          <p class="small muted">ุงูููู ุงูุฃุฒุฑู = ูุจูุท ุบุงูุจุ ุงูุฃุฎุถุฑ = ุทุจูุนูุ ุงูุฃุญูุฑ = ุงุฑุชูุงุน.</p>
        </div>
        <div>
          <h3 class="muted">Histogram (ุชูุฒูุน ุงููุฑุงุกุงุช)</h3>
          <div id="histogram" class="hist"></div>
        </div>
      </div>
    </section>
  </div>

  <!-- ุฒุฑ ุงููุณุงุนุฏ ูููุญุชู -->
  <button id="chatToggle" class="fab" title="ุงููุณุงุนุฏ">๐ฌ</button>
  <aside id="chatPanel" class="chat hidden" aria-hidden="true">
    <header class="chat-head">
      <strong>ุงููุณุงุนุฏ</strong>
      <button id="chatClose" class="btn">โ</button>
    </header>
    <div id="chatBody" class="chat-body"></div>
    <div class="chat-input">
      <input id="chatQ" type="text" placeholder="ุงุณุฃูู: ูุงุฐุง ุชุนูู 250ุ ุฃู ูุฎูุต ุงูุฃุณุจูุนโฆ">
      <button id="chatSend" class="btn primary">ุฅุฑุณุงู</button>
    </div>
  </aside>

  <div id="loader" class="loader hidden">ุฌุงุฑู ุงูุชุญูููโฆ</div>

  <script type="module" src="js/reports.js?v=3"></script>
</body>
</html>
