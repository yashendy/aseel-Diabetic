:root{
  --bg:#0B1020; --bg2:#141A2E;
  --card:rgba(255,255,255,.04); --card-border:rgba(255,255,255,.08);
  --text:#E9EEFC; --muted:#A7B1D0;
  --primary:#00BFA6; --primary-2:#009E85;
  --info:#4DEEEA; --success:#2EF876; --danger:#FF6B6B;
  --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
}

/* أساسيات */
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:#f6f8fb;color:#0f172a;font-family:"Tajawal",system-ui,-apple-system}
a{color:inherit;text-decoration:none}
input,select,button{font:inherit}

.container{max-width:1100px;margin:20px auto;padding:0 16px}

.topbar{height:56px;display:flex;align-items:center;gap:12px;padding:0 16px;background:#0b132b;color:#fff}
.topbar .brand{font-weight:800}
.btn{border:0;background:#0ea5e9;color:#fff;padding:10px 14px;border-radius:12px;cursor:pointer}
.btn:hover{filter:brightness(.95)}
.btn.ghost{background:#e2e8f0;color:#0f172a}
.btn.warn{background:#f59e0b}
.btn.sm{padding:6px 10px;border-radius:10px}

.summary{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:14px}
.card{background:#fff;border:1px solid #e2e8f0;border-radius:16px;padding:14px;box-shadow:0 6px 16px rgba(2,6,23,.04)}
.card .title{font-size:13px;color:#475569}
.card .value{font-weight:900;font-size:20px;margin-top:6px}
.card.big .value{font-size:28px}
.card .hint{font-size:12px;color:#64748b}

.summary .card .value input{width:100%;text-align:center;border:1px solid #e2e8f0;border-radius:12px;padding:8px}

.bar{display:grid;grid-template-columns:1fr 1fr auto;gap:12px;margin:16px 0}
.bar .group{background:#fff;border:1px solid #e2e8f0;border-radius:16px;padding:10px 12px}
.bar label{font-size:13px;color:#475569}
.bar input,.bar select{width:100%;border:1px solid #e2e8f0;border-radius:12px;padding:8px;margin-top:6px;text-align:center}
.bar .hint{font-size:12px;color:#64748b;margin-top:6px}

.target-pill{display:flex;align-items:center;gap:10px}
.badge{display:inline-block;padding:6px 10px;border-radius:999px;background:#e2e8f0;color:#0f172a;font-size:12px}
.badge.ok{background:#dcfce7;color:#14532d}
.badge.warn{background:#fee2e2;color:#7f1d1d}

.actions{display:flex;gap:10px;align-items:center;margin-bottom:6px}
.actions .spacer{flex:1}

.basket h3{margin:10px 0}
.table-wrap{background:#fff;border:1px solid #e2e8f0;border-radius:16px;padding:6px;overflow:auto}
.tbl{width:100%;border-collapse:separate;border-spacing:0}
.tbl th,.tbl td{padding:10px;border-bottom:1px dashed #e2e8f0;text-align:center}
.tbl th{font-weight:800;color:#334155;background:#f8fafc;position:sticky;top:0}
.tbl tfoot td{font-weight:900}
.tbl .total-label{text-align:left;color:#475569}
.tbl input{width:100%;border:1px solid #e2e8f0;border-radius:10px;padding:7px;text-align:center}

.status-line{margin:8px 4px;color:#64748b;font-size:13px}

.doses{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:16px 0}

/* ====== Modal / Sheet ====== */
.modal{position:fixed;inset:0;display:flex;align-items:flex-end;justify-content:center;z-index:50}
.modal[hidden]{display:none}
.modal .overlay{position:absolute;inset:0;background:rgba(2,6,23,.45)}
.modal .sheet{position:relative;width:min(100%,900px);max-height:80vh;background:#fff;border-radius:16px 16px 0 0;padding:14px 14px 18px;overflow:auto}
.sheet-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}

/* ====== مكتبة الأصناف (تصميم مضغوط عمودي) ====== */
.lib-list{
  display:grid;gap:10px;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  max-height:60vh;overflow:auto;
}
.lib-item{
  border:1px solid #e2e8f0;border-radius:12px;background:#fff;
  padding:10px;display:flex;flex-direction:column;gap:10px;
  box-shadow:0 6px 16px rgba(2,6,23,.04);
}
.lib-item .thumb{
  width:100%;height:120px;object-fit:cover;border-radius:10px;
  background:#f1f5f9;border:1px solid #e2e8f0;
}
.lib-item .name{font-weight:800;font-size:14px}
.lib-item .meta{font-size:12px;color:#475569}
.lib-item .tags{display:flex;flex-wrap:wrap;gap:6px}
.lib-item .tag{font-size:10.5px;background:#e2e8f0;border-radius:999px;padding:3px 7px}
.lib-item .row{display:grid;gap:8px;grid-template-columns:1fr}
.lib-item select,.lib-item input{
  border:1px solid #e2e8f0;border-radius:10px;padding:8px 10px;width:100%;text-align:center
}
.lib-item .btn{width:100%}
.lib-item .hint{font-size:12px;color:#64748b}

/* موبايل */
@media (max-width:900px){
  .summary{grid-template-columns:repeat(2,1fr)}
  .doses{grid-template-columns:1fr}
  .bar{grid-template-columns:1fr}
}
