/* ===========================
   meals.css  â€” UI & Modal + Loader
   =========================== */

/* Base resets a bit */
:root {
  --brand: #6b64f3;
  --brand-2: #8c86ff;
  --danger: #ff5c6c;
  --ok: #22c55e;
  --warn: #f59e0b;
  --ink: #0f172a;
  --ink-2: #334155;
  --bg: #fafafb;
  --muted: #94a3b8;
  --card: #ffffff;
  --chip: #f2f3ff;
  --shadow: 0 10px 30px rgba(15, 23, 42, .08);
  --radius: 14px;
}

html, body {
  background: var(--bg);
  color: var(--ink);
}

/* --- App loader overlay --- */
.app-loader {
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,.7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.app-loader.show { display:flex; }
.app-loader .box {
  background: var(--card);
  box-shadow: var(--shadow);
  border-radius: 16px;
  padding: 18px 24px;
  display: flex; align-items: center; gap: 12px;
  font-weight: 600; color: var(--ink-2);
}
.app-loader .spinner {
  width: 18px; height: 18px; border-radius:50%;
  border: 3px solid var(--chip);
  border-top-color: var(--brand);
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg) }}

/* --- Progress bar for carb target --- */
.target-wrap {
  position: relative; height: 10px; background: #eef2ff; border-radius: 999px; overflow: hidden;
}
.target-wrap .bar {
  position: absolute; inset-inline-start: 0; top: 0; bottom: 0; width: 0%;
  transition: width .25s ease;
}
.target-wrap .bar.ok { background: var(--ok); }
.target-wrap .bar.warn { background: var(--warn); }
.target-wrap .bar.danger { background: var(--danger); }
.target-wrap .label {
  margin-top: 8px; font-size: 12px; color: var(--ink-2);
}

/* --- Chips (filters/tags) --- */
.chips { display:flex; flex-wrap: wrap; gap: 8px; }
.chip {
  background: var(--chip);
  color: var(--ink-2);
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 12px;
  display:inline-flex; align-items:center; gap:6px;
  cursor: pointer;
  user-select: none;
}
.chip.on { background: var(--brand); color: #fff; }

/* --- Buttons --- */
.btn {
  appearance: none;
  border: 0; border-radius: 12px;
  padding: 8px 12px;
  font-weight: 600;
  background: var(--brand);
  color: #fff; cursor: pointer;
  transition: transform .05s ease, opacity .2s ease;
}
.btn:active { transform: translateY(1px); }
.btn.secondary { background: #eef2ff; color: var(--ink-2); }
.btn.ghost { background: transparent; color: var(--ink-2); }
.btn.danger { background: var(--danger); }

/* --- Toast --- */
.toast {
  position: fixed; inset-inline-end: 18px; inset-block-end: 18px;
  background: var(--ink);
  color:#fff; padding: 10px 14px; border-radius: 12px;
  box-shadow: var(--shadow);
  opacity: 0; transform: translateY(8px); transition: .25s ease;
  z-index: 9999;
}
.toast.show { opacity: 1; transform: translateY(0); }

/* ===========================
   Modal: Library of Food Items
   =========================== */
.modal-backdrop {
  position: fixed; inset: 0;
  background: rgba(15,23,42,.35);
  opacity: 0; pointer-events: none;
  transition: opacity .2s ease; z-index: 9998;
}
.modal {
  position: fixed; inset: 0;
  display: grid; place-items: center;
  pointer-events: none; z-index: 9999;
}
.modal.open .modal-backdrop { opacity: 1; pointer-events: all; }
.modal.open .modal-panel { transform: translateY(0); opacity: 1; }

.modal-panel {
  width: min(1100px, 92vw);
  max-height: 86vh;
  background: var(--card);
  border-radius: 18px;
  box-shadow: var(--shadow);
  display: grid; grid-template-rows: auto 1fr auto;
  opacity: 0; transform: translateY(10px); transition: .2s ease;
  pointer-events: all;
  overflow: hidden;
}
.modal-header, .modal-footer {
  padding: 14px 16px; background: #fff;
  border-bottom: 1px solid #eef2ff;
}
.modal-footer { border-top: 1px solid #eef2ff; border-bottom: 0; }
.modal-header .row { display:flex; gap: 10px; align-items: center; }
.modal-search {
  flex: 1;
  background: #f8f9ff;
  border-radius: 999px;
  padding: 8px 12px;
  display:flex; align-items:center; gap:8px;
}
.modal-search input {
  border:0; background:transparent; outline:none; width:100%;
  font-size:14px; color: var(--ink-2);
}

.modal-body {
  padding: 14px 16px; overflow: auto;
  background: #fafaff;
}
.grid {
  display: grid; gap: 12px;
  grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
}
.card-item {
  background: #fff; border-radius: 16px; overflow: hidden;
  box-shadow: var(--shadow);
  display: grid; grid-template-rows: 120px auto auto;
}
.card-item .thumb {
  background: #f7f7ff; display:grid; place-items:center;
}
.card-item .thumb img {
  width: 80px; height: 80px; object-fit: cover; border-radius: 12px;
}
.card-item .meta { padding: 10px 12px; }
.card-item .meta .name {
  font-weight: 700; color: var(--ink); margin-bottom: 2px;
}
.card-item .meta .sub {
  font-size: 12px; color: var(--muted);
}
.card-item .actions {
  padding: 10px 12px; display:flex; justify-content: space-between; align-items:center;
}
.card-item .ic {
  background: #f1f5ff; border:0; border-radius: 10px; padding: 6px 8px; cursor:pointer;
}
.card-item .ic.on { background: var(--brand); color:#fff; }
.card-item .btn-add {
  padding: 6px 10px; border-radius: 10px; background: var(--brand); color:#fff; border:0; cursor:pointer;
}

/* table thumbnails */
.table-thumb {
  width: 32px; height: 32px; border-radius: 8px; object-fit: cover; background: #f3f4f6;
}

/* small helpers */
.hidden { display: none !important; }
.note { color: var(--muted); font-size: 12px; }
