:root{
  --bg:#f7fbff;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#5b6477;
  --border:#e6ecf5;
  --shadow:0 8px 24px rgba(2,6,23,.06);
  --radius:18px;

  --primary:#7c3aed;   /* بنفسجي */
  --primary-2:#f472b6; /* وردي */
  --success:#22c55e;
  --warn:#fb923c;
  --danger:#ef476f;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:
    radial-gradient(800px 400px at 20% -10%, #ffe3f5 0, transparent 70%),
    radial-gradient(900px 500px at 100% 0, #e6e8ff 0, transparent 70%),
    var(--bg);
  color:var(--text);font-family:system-ui,Segoe UI,Roboto,Arial;line-height:1.55;
}

/* Topbar */
.topbar{
  position:sticky;top:0;z-index:10;display:flex;gap:12px;align-items:center;
  background:linear-gradient(0deg,rgba(255,255,255,.0),rgba(255,255,255,.8));
  backdrop-filter:saturate(1.2) blur(8px);
  padding:12px 16px;border-bottom:1px solid var(--border)
}
.child-tile{display:flex;align-items:center;gap:10px}
.child-tile .avatar{font-size:1.6rem}
.child-tile .info h1{margin:0;font-size:1.25rem}
.child-tile .sub{display:flex;gap:8px;color:var(--muted);font-size:.9rem}
.pill{display:inline-flex;gap:4px;align-items:center;padding:.2rem .6rem;border:1px solid var(--border);border-radius:999px;background:#fff}
.right-meta{margin-inline-start:auto;display:flex;gap:8px}

.container{max-width:1100px;margin:18px auto;padding:0 12px;display:grid;gap:16px}
.cards{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px}
@media (max-width:900px){.cards{grid-template-columns:1fr}}

.card{
  background:var(--card);border:1px solid var(--border);border-radius:var(--radius);
  box-shadow:var(--shadow);padding:16px
}
.card.highlight{outline:2px solid var(--primary)}
.card-title{font-weight:800;margin-bottom:8px;display:flex;align-items:center;gap:8px}
.card-title.with-btn{display:flex;justify-content:space-between}
.card-value{display:flex;gap:8px;align-items:center}
.hint{color:var(--muted)}

input.text, input[type=number], select{
  background:#fff;border:1px solid var(--border);color:var(--text);
  padding:.55rem .7rem;border-radius:12px;min-width:0
}
input:focus, select:focus, button:focus{outline:2px solid #dcd2ff;outline-offset:2px}

.btn{
  background:#fff;border:1px solid var(--border);color:var(--text);
  padding:.55rem .9rem;border-radius:14px;cursor:pointer;box-shadow:var(--shadow)
}
.btn:hover{transform:translateY(-1px)}
.btn.ghost{background:transparent;border:0;box-shadow:none}
.btn.primary{
  background:linear-gradient(90deg,var(--primary),var(--primary-2));border:0;color:#fff
}
.btn.success{background:linear-gradient(90deg,#22c55e,#a7f3d0);border:0;color:#063}
.btn.soft{background:#faf5ff;border:1px dashed var(--primary);color:var(--primary)}

.badge{background:#f1f5f9;border:1px solid var(--border);border-radius:12px;padding:.25rem .5rem;color:#334155}

.range-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.progress{height:12px;background:#f1f5f9;border:1px solid var(--border);border-radius:999px;margin-top:10px}
.progress-bar{height:100%;width:0;background:linear-gradient(90deg,#22c55e,#86efac);border-radius:999px;transition:width .25s}

.range-info{display:flex;justify-content:space-between;margin-top:8px}
.state{padding:.2rem .6rem;border-radius:999px;border:1px solid var(--border)}
.state.ok{background:#eafff5;color:#065f46}
.state.near{background:#fff5e6;color:#7c2d12}
.state.out{background:#fff0f4;color:#9f1239}

.diet-row{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:8px}
.chips{display:grid;gap:6px}
.chips-input{width:100%}
.chips-list{display:flex;gap:6px;flex-wrap:wrap}
.chip{
  background:#fafafa;border:1px solid var(--border);padding:.25rem .55rem;border-radius:999px;
}
.chip .x{margin-inline-start:6px;cursor:pointer}

.toolbar{display:flex;gap:10px;align-items:center}
.spacer{flex:1}

.table-wrap{overflow:auto}
table.items{width:100%;border-collapse:collapse}
.items th,.items td{border-bottom:1px solid var(--border);padding:10px;text-align:center}
.items tbody tr:hover{background:#fafafa}
.total-cell{text-align:left;color:var(--muted)}

.dose-cards .dose{font-size:2rem;font-weight:900;display:flex;align-items:baseline;gap:6px}

/* Modal */
.modal{border:0;border-radius:16px;background:var(--card);color:var(--text);padding:0;box-shadow:var(--shadow)}
.modal[open]{animation:pop .15s ease-out}
.modal .modal-head{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--border)}
.modal .grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px;padding:12px}
@media (max-width:900px){.modal .grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
.food-card{border:1px solid var(--border);border-radius:14px;overflow:hidden;cursor:pointer;background:#fff}
.food-card img{width:100%;aspect-ratio:4/3;object-fit:cover}
.food-card .meta{padding:10px;font-size:.9rem;display:grid;gap:4px}
.food-card .pill{font-size:.75rem;background:#f1f5f9;border:1px solid var(--border)}

.list{padding:10px;display:grid;gap:8px}
.preset-item{display:flex;justify-content:space-between;gap:10px;align-items:center;border:1px solid var(--border);border-radius:12px;padding:10px;background:#fff}

@keyframes pop{from{transform:scale(.97);opacity:.7}to{transform:scale(1);opacity:1}}
