/* ====== أساسيات عامة بنغمة فاتحة مرحة ====== */
:root{
  --bg: #f9fbff;
  --card: #ffffff;
  --ink: #1b2330;
  --muted: #6b7a90;
  --primary: #6c63ff;   /* بنفسجي فاتح */
  --primary-ink: #ffffff;
  --accent: #ff7eb6;    /* وردي فاتح */
  --success: #20c997;
  --danger: #ff6b6b;
  --border: #e6ecf5;
  --chip: #eef1ff;
  --shadow: 0 8px 24px rgba(17,38,146,.08);
  --radius: 16px;
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: "Tajawal", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: linear-gradient(180deg, #fdfdff, var(--bg));
  color: var(--ink);
}

/* ====== أزرار وإضافات ====== */
.btn{
  border: 0;
  border-radius: 12px;
  padding: 10px 14px;
  font-weight: 700;
  cursor: pointer;
  background: var(--card);
  box-shadow: var(--shadow);
  transition: transform .06s ease, box-shadow .2s;
}
.btn:hover{ transform: translateY(-1px); }
.btn:disabled{ opacity: .55; cursor: not-allowed; }
.btn.primary{ background: var(--primary); color: var(--primary-ink); }
.btn.light{ background:#f1f4ff; color:#394272; }
.btn.danger{ background: var(--danger); color:#fff; }
.btn.toggle{ background:#eef1ff; }
.btn.toggle.active{ background: var(--accent); color:#fff; }

.icon-btn{
  background: transparent; border:0; cursor:pointer;
  font-size: 18px; line-height: 1; padding: 6px 8px;
}

/* ====== هيدر ====== */
.app-header{
  display:flex; align-items:center; justify-content:space-between;
  gap:20px; padding:18px 20px; position: sticky; top:0; z-index:2;
  background: rgba(255,255,255,.9); backdrop-filter: blur(6px);
  border-bottom: 1px solid var(--border);
}
.brand{ display:flex; align-items:center; gap:10px; }
.brand .logo{ font-size: 28px; }
.app-header h1{ margin:0; font-size: 22px; }
.header-actions{ display:flex; align-items:center; gap:10px; }
.view-toggle .btn{ padding:8px 10px; }

/* ====== كروت/بطاقات ====== */
.card{
  background: var(--card); border:1px solid var(--border);
  border-radius: var(--radius); box-shadow: var(--shadow);
}
.filters-card{ margin:18px; padding:14px; }
.filters-row{
  display:grid; gap:14px; grid-template-columns: 1fr 180px 180px 120px 120px;
}
.filter label{ display:block; font-size:13px; color:var(--muted); margin-bottom:6px; }
.filter input,.filter select{
  width:100%; padding:10px 12px; border:1px solid var(--border);
  border-radius: 12px; background:#fff;
}

.switch{ position:relative; display:inline-block; width:46px; height:28px; }
.switch input{ display:none; }
.switch span{
  position:absolute; inset:0; background:#e8edf9; border-radius:28px;
}
.switch span::after{
  content:""; position:absolute; width:20px; height:20px;
  background:#fff; border-radius:50%; top:4px; left:4px; transition: all .2s;
  box-shadow: var(--shadow);
}
.switch input:checked + span{ background: #c9d1ff; }
.switch input:checked + span::after{ transform: translateX(18px); }

.content{ padding: 10px 18px 40px; }

.cards{
  display:grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap:16px;
}
.card-item{
  display:grid; gap:10px; padding:12px; align-content:flex-start;
}
.card-item .thumb{
  width:100%; aspect-ratio: 16/10; border-radius: 12px; background:#f6f7ff;
  display:flex; align-items:center; justify-content:center; overflow:hidden; border:1px solid var(--border);
}
.card-item .thumb img{ width:100%; height:100%; object-fit:cover; }
.card-item .name{ font-weight:800; font-size: 18px; margin:0; }
.card-item .meta{ display:flex; justify-content:space-between; align-items:center; color:var(--muted); }
.chips{ display:flex; flex-wrap:wrap; gap:8px; }
.chip{
  background: var(--chip); padding:6px 10px; border-radius: 999px;
  font-size: 12px; cursor: pointer; border:1px dashed #bcc6ff;
}
.chip.active{ background: var(--accent); color:#fff; border-color: transparent; }

.table-wrap{ margin-top: 12px; }
.data-table{
  width:100%; border-collapse: collapse; background:#fff; border-radius: 16px; overflow: hidden;
  box-shadow: var(--shadow);
}
.data-table th,.data-table td{ padding:10px 12px; border-bottom:1px solid var(--border); text-align: center; }
.data-table th{ background:#f7f8ff; }

.pager{
  display:flex; justify-content:center; align-items:center; gap:10px; margin-top:20px;
}
.muted{ color: var(--muted); }

/* ====== الديالوج ====== */
dialog::backdrop{ background: rgba(29,43,91,.25); backdrop-filter: blur(3px); }
.dialog{
  width: min(920px, 96vw); border:0; border-radius: 18px; padding:0; overflow:hidden;
  box-shadow: 0 24px 70px rgba(31,41,91,.18);
}
.dialog-header{
  display:flex; align-items:center; justify-content:space-between; padding:14px 16px;
  background: linear-gradient(120deg, #f7f6ff, #fff);
  border-bottom:1px solid var(--border);
}
.dlg-body{ padding:16px; }
.grid{
  display:grid; gap:14px;
  grid-template-columns: repeat(12, 1fr);
}
.form-group{ grid-column: span 6; display:flex; flex-direction:column; gap:6px; }
.form-group.small{ grid-column: span 2; }
.form-group input,.form-group select{
  padding:10px 12px; border:1px solid var(--border); border-radius:12px; background:#fff;
}
.fieldset{
  grid-column: span 12; border:1px dashed #cfd8ff; padding:10px; border-radius:14px; background:#fbfcff;
}
.fieldset legend{ padding: 0 8px; color:#4954a6; font-weight:800; }

.image-uploader{ display:grid; grid-template-columns: 220px 1fr; gap:12px; align-items:start; }
.image-uploader #preview{
  width:220px; height:150px; object-fit:cover; border:1px solid var(--border); border-radius: 12px; background:#f3f5ff;
}
.uploader-actions{ display:grid; gap:8px; grid-template-columns: 1fr auto; align-items:center; }
.uploader-actions input[type="file"]{ grid-column: span 2; }
.uploader-actions progress{
  width:100%; height:10px; border-radius: 6px; overflow:hidden; appearance: none;
}
.uploader-actions progress::-webkit-progress-bar{ background:#eef1ff; border-radius:6px; }
.uploader-actions progress::-webkit-progress-value{ background: linear-gradient(90deg, var(--primary), var(--accent)); border-radius:6px; }

/* صفوف المقادير */
#measures-list .measure-row{
  display:grid; grid-template-columns: minmax(160px,1fr) 130px auto;
  gap:10px; margin:6px 0;
}
#measures-list .measure-row input, #measures-list .measure-row select{
  border:1px solid var(--border); border-radius: 10px; padding:8px 10px;
}

.dlg-footer{
  display:flex; gap:10px; justify-content:flex-end; padding:14px 16px; background:#f8faff;
  border-top:1px solid var(--border);
}

/* تجاوبية */
@media (max-width: 980px){
  .filters-row{ grid-template-columns: 1fr 1fr 1fr 1fr; }
  .image-uploader{ grid-template-columns: 1fr; }
  .form-group{ grid-column: span 12; }
  .form-group.small{ grid-column: span 6; }
}
