:root{
  --bg:#f7fbff; --card:#fff; --ink:#111827; --muted:#6b7280;
  --border:#e5e7eb; --brand:#4f46e5; --ok:#10b981; --warn:#ef4444; --info:#2563eb;
}

*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--ink);font-family:"Segoe UI",Tahoma,Arial,sans-serif}
.container{max-width:1120px;margin:14px auto;padding:0 10px}

.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px;margin-bottom:12px}

.header{display:grid;grid-template-columns:1fr 2fr 1fr;gap:10px;align-items:center}
.left{display:flex;gap:8px;align-items:center}
.center{text-align:center}
.right{display:flex;gap:8px;align-items:center;justify-content:flex-end;flex-wrap:wrap}

.btn{border:1px solid var(--border);background:#fff;border-radius:8px;padding:8px 12px;cursor:pointer}
.btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
.btn.back{background:#eef0ff;border-color:var(--brand);color:#4f46e5}

.muted{color:var(--muted);margin:6px 0 0}
.chips{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:6px}
.chip{background:#eef2ff;border:1px solid #c7d2fe;color:#3730a3;padding:3px 8px;border-radius:999px;font-size:12px}
.chip.small{font-size:11px}

.filters .row{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
.filters input[type="date"], .controls select{padding:8px 10px;border:1px solid var(--border);border-radius:10px}
.ctl{display:flex;gap:6px;align-items:center}
.ctl.small{font-size:12px}

.legend{display:flex;align-items:center;gap:8px;margin-inline-start:auto}
.lg{padding:3px 8px;border-radius:999px;font-size:12px;border:1px solid var(--border);background:#fafafa}
.lg.low{color:var(--info);background:#e8f2ff;border-color:#d7e7ff}
.lg.ok{color:var(--ok);background:#eafff4;border-color:#d8f7e7}
.lg.high{color:var(--warn);background:#fff1f1;border-color:#ffe1e1}

.qr{display:flex;flex-direction:column;align-items:center;gap:4px;margin-top:4px}
.qr-caption{font-size:10px;color:#64748b}

/* ===== Pivot table ===== */
table.pivot{width:100%;border-collapse:collapse;table-layout:fixed}
.pivot th,.pivot td{border:1px solid var(--border);padding:8px 6px;vertical-align:top}
.pivot thead th{background:#f6f7fb;text-align:center;font-weight:700}
.pivot th.datecol{width:12%}
.pivot th.slot{width:11%}

/* الخلية: 3 أسطر */
.cell{font-size:12px;line-height:1.2;min-height:56px}
.cell .val{font-weight:700}
.cell .val.ok{color:var(--ok)}
.cell .val.low{color:var(--info)}
.cell .val.high{color:var(--warn)}
.cell .arrow{font-weight:700;margin-inline:4px}
.cell .line{display:block;margin:3px 0}
.cell .dash{color:#9ca3af}

/* تلوين خفيف حسب الحالة */
.bg-low{background:#f0f7ff}
.bg-ok{background:#f6fffa}
.bg-high{background:#fff6f6}

/* loader */
.loader{
  position:fixed;inset-inline:0;bottom:12px;margin:auto;width:220px;text-align:center;
  background:#111827;color:#fff;padding:8px 10px;border-radius:10px;opacity:.92;z-index:9999
}
.hidden{display:none}

/* ===== الطباعة ===== */
@media print {
  body{background:#fff}
  .card{box-shadow:none}
  .controls, .btn.back, .filters .row .btn, .legend .chip.small, #blankMode { display:none !important; }
  .container{max-width:100%;margin:0;padding:0}
  .header, .filters, .card{border:none}
  /* إخفاء سناك في الطباعة فقط (مش موجود كعمود أصلاً) */
  .pivot th.snack, .pivot td.snack { display:none !important; }
  /* حجم خط أصغر للطباعة */
  .cell{font-size:11px;min-height:auto}
}
