:root{
  --bg:#f7fbff;
  --card:#fff;
  --ink:#0f172a;
  --muted:#6b7280;
  --ring:#e5e7eb;
  --shadow:0 10px 24px rgba(15,23,42,.06);
  --radius:18px;

  --primary:#7c3aed;
  --ok:#22c55e;
  --danger:#ef4444;

  --chip:#f1edff;
  --chip-ink:#5b21b6;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;font-family:"Tajawal",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:linear-gradient(180deg,#f9fbff,#fff)}

.topbar{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.8);backdrop-filter:saturate(180%) blur(12px);display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid var(--ring)}
.topbar .btn{margin-inline:4px}
.title{margin:0}
.pill{background:var(--chip);color:var(--chip-ink);border-radius:999px;padding:4px 10px;margin-inline-start:8px}
.role{display:block;color:var(--chip-ink);text-align:center;margin-top:2px}

.container{max-width:1100px;margin:16px auto;padding:0 12px}

.card{background:var(--card);border:1px solid var(--ring);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;margin:12px 0}
.card h2{margin:0 0 12px 0}
.grid4{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:8px}
.grid3{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px}
.grid4>div,.grid3>div{background:#fafafa;border:1px solid var(--ring);border-radius:14px;padding:10px}
.muted{color:var(--muted)}

.form-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:12px}
.form-grid label{display:flex;flex-direction:column;gap:6px;background:#fafafa;border:1px solid var(--ring);border-radius:14px;padding:10px}
.form-grid input,.form-grid select{padding:10px;border:1px solid var(--ring);border-radius:10px;background:#fff}

.readonly{display:flex;flex-direction:column;justify-content:center;background:#fdfdfd;border:1px dashed var(--ring);border-radius:14px;padding:10px}
.readonly .note{color:var(--muted);font-size:13px}
.readonly .bmi{margin-top:6px;font-weight:700}

.hint{color:var(--muted);font-size:13px;margin:6px 2px}
.error{color:var(--danger);font-weight:700}
.hidden{display:none}

/* ===== أهداف الكارب: خانات صغيرة (حتى 3 أرقام) ===== */
.goals{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:12px}
.goals h3{margin:0 0 6px 0}
.pair{display:flex;gap:8px}
.pair input{
  width:6ch;               /* يكفي حتى 3 أرقام */
  padding:8px 20px;
  text-align:center;
  border:1px solid var(--ring);
  border-radius:10px;
  background:#fff;
}

.share-wrap{display:flex;align-items:center;gap:10px}
.switch{display:flex;align-items:center;gap:8px}
.switch input{inline-size:18px;block-size:18px}

.btn{border:0;border-radius:12px;padding:10px 14px;cursor:pointer;font-weight:700}
.btn.primary{background:var(--primary);color:#fff}
.btn.ghost{background:#fff;border:1px solid var(--ring)}
.btn:disabled{opacity:.6;cursor:not-allowed}

.status-row{display:flex;justify-content:flex-start;align-items:center;margin:12px 0}
.status{color:var(--muted)}
.status.ok{color:var(--ok)}
.status.err{color:var(--danger)}

.loader{position:fixed;inset:auto 16px 16px auto;background:#111827;color:#fff;padding:10px 12px;border-radius:10px;box-shadow:var(--shadow)}

.critical input{border-color:#fde68a;background:#fffbeb}

@media (max-width:980px){
  .grid4,.grid3,.form-grid,.goals{grid-template-columns:repeat(2,minmax(0,1fr))}
}
@media (max-width:560px){
  .grid4,.grid3,.form-grid,.goals{grid-template-columns:1fr}
}
